{"remainingRequest":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\jusheng1\\src\\views\\editAccounts\\index.vue?vue&type=style&index=0&id=6c12efa6&lang=scss&scoped=true&","dependencies":[{"path":"D:\\项目\\jusheng1\\src\\views\\editAccounts\\index.vue","mtime":1627990491914},{"path":"D:\\项目\\jusheng1\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWRpdEFjY291bnRzIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLi4vLi4vYXNzZXRzL2ltYWdlcy9sb2dpbmJnLmpwZyIpOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmVkaXRBY2NvdW50c2Zvcm0gewogIGJvcmRlci1yYWRpdXM6IDZweDsKICBiYWNrZ3JvdW5kOiAjY2NjYzsKICB3aWR0aDogNDAwcHg7CiAgcGFkZGluZzogMHB4IDI1cHggNXB4IDI1cHg7CiAgLmVsLWlucHV0IHsKICAgIGhlaWdodDogMzhweDsKICAgIGlucHV0IHsKICAgICAgaGVpZ2h0OiAzOHB4OwogICAgfQogIH0KICAuaW5wdXQtaWNvbiB7CiAgICBoZWlnaHQ6IDM5cHg7CiAgICB3aWR0aDogMTRweDsKICAgIG1hcmdpbi1sZWZ0OiAycHg7CiAgfQp9Ci50aXRsZSB7CiAgbWFyZ2luOiAwcHggYXV0byAzMHB4IGF1dG87CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjNzA3MDcwOwogIHBhZGRpbmctdG9wOiAyMHB4Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/editAccounts","sourcesContent":["<template>\n  <div class=\"editAccounts\">\n    <el-form\n      label-position=\"left\"\n      :model=\"ruleForm\"\n      status-icon\n      :rules=\"rules\"\n      ref=\"ruleForm\"\n      label-width=\"80px\"\n      class=\"editAccountsform\"\n    >\n      <h3 class=\"title\">找回密码</h3>\n\n      <el-form-item prop=\"phoneNumber\" label=\"手机号码\">\n        <el-input\n          type=\"text\"\n          v-model.trim=\"ruleForm.phoneNumber\"\n          clearable\n          auto-complete=\"off\"\n          placeholder=\"请输入手机号\"\n        >\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"code\" label=\"验证码\">\n        <el-input\n        v-if=\"disabled ==false\"\n          style=\"margin-right: 10px; min-width: 160px\"\n          clearable\n          auto-complete=\"off\"\n          placeholder=\"请输入验证码\"\n          v-model.trim=\"ruleForm.code\"\n          @keyup.enter.native=\"handleLogin\"\n        >\n        </el-input>\n         <el-input\n          v-if=\"disabled ==true\"\n          style=\"margin-right: 20px;min-width: 110px;\"\n          clearable\n          auto-complete=\"off\"\n          placeholder=\"请输入验证码\"\n          v-model.trim=\"ruleForm.code\"\n          @keyup.enter.native=\"handleLogin\"\n        >\n        </el-input>\n        <el-button\n          style=\"height: 36px\"\n          type=\"button\"\n          size=\"mini\"\n          @click=\"getSendcode\"\n          :disabled=\"disabled\"\n          v-if=\"disabled == false\"\n          >获取验证码\n        </el-button>\n        <el-button\n          type=\"button\"\n          @click=\"getSendcode\"\n          :disabled=\"disabled\"\n          v-if=\"disabled == true\"\n          >{{ btntxt }}\n        </el-button>\n      </el-form-item>\n\n      <el-form-item prop=\"password\" label=\"密码\">\n        <el-input\n          type=\"text\"\n          v-model.trim=\"ruleForm.password\"\n          clearable\n          auto-complete=\"off\"\n          placeholder=\"密码\"\n        >\n        </el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"conPassword\" label=\"确认密码\">\n        <el-input\n          type=\"text\"\n          v-model.trim=\"ruleForm.conPassword\"\n          clearable\n          auto-complete=\"off\"\n          placeholder=\"请输入确认密码\"\n        >\n        </el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\n          >提交</el-button\n        >\n        <el-button @click=\"goTo()\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { resetUserInfo } from \"@/api/editAccount\";\nimport { getPhoneCode } from \"@/api/reg\";\nimport {isvalidateCode, isvalidPass, isvalidPhone, isvalidUsername,} from \"../reg/js/index.js\";\n\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else if (!isvalidPass(value)) {\n        callback(new Error(\"密码必须由数字和字母组成,长度在8~16字符\"));\n      } else {\n        if (this.ruleForm.repassword !== \"\") {\n          this.$refs.ruleForm.validateField(\"repassword\");\n        }\n        callback();\n      }\n    };\n\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入确认密码\"));\n      } else if (value !== this.ruleForm.password) {\n        callback(new Error(\"两次输入密码不一致！\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validPhone = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入手机号码\"));\n      } else if (!isvalidPhone(value)) {\n        callback(new Error(\"请填写正确的手机号码\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validUsername = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      } else if (!isvalidUsername(value)) {\n        callback(new Error(\"登录名必须要由数字和字母组成,长度为8-20个字符\"));\n      } else {\n        callback();\n      }\n    };\n    var validateCode = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"验证码不能为空\"));\n      } else if (!isvalidateCode(value)) {\n        callback(new Error(\"验证码的长度为6位数\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      disabled: false,\n      time: 0,\n      btntxt: \"重新发送\",\n      activeName: \"second\",\n      ruleForm: {\n        userName: \"zz1111111\",\n        phoneNumber: \"\",\n        password: \"\",\n        conPassword: \"\",\n        code: \"1234\",\n        type: \"\",\n      },\n      rules: {\n        phoneNumber: [\n          { required: true, trigger: \"blur\", message: \"手机号码不能为空\" },\n          { required: true, validator: validPhone, trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, trigger: \"blur\", message: \"密码不能为空\" },\n          { required: true, validator: validatePass, trigger: \"blur\" },\n        ],\n        conPassword: [\n          { required: true, trigger: \"blur\", message: \"确认密码不能为空\" },\n          { required: true, validator: validatePass2, trigger: \"blur\" },\n        ],\n        code: [\n          { required: true, trigger: \"blur\", message: \"验证码不能为空\" },\n          // { required: true, validator: validateCode, trigger: \"blur\" }\n        ],\n      },\n    };\n  },\n  methods: {\n    goTo() {\n      //直接跳转\n      this.$router.push(\"/login\");\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          resetUserInfo(this.ruleForm).then((res) => {\n            // console.log(11,res);\n            if (res.code == 200) {\n              this.$message({\n                message: res.msg,\n                type: \"success\",\n                center: true,\n              });\n              this.$router.push(\"/login\");\n            } else {\n              this.$message({\n                message: res.msg,\n                type: \"error\",\n                center: true,\n              });\n            }\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    //获取验证码的接口\n    getSendcode() {\n      getPhoneCode(this.ruleForm.phoneNumber, \"reset\").then((res) => {\n        // console.log(11,res);\n        this.time = 60;\n        this.disabled = true;\n        this.timer();\n        if (res.code == 200) {\n          this.$message({\n            message: res.msg,\n            type: \"success\",\n            center: true,\n          });\n        } else {\n          this.$message({\n            message: res.msg,\n            type: \"error\",\n            center: true,\n          });\n        }\n      });\n    },\n    //60S倒计时\n    timer() {\n      if (this.time > 0) {\n        this.time--;\n        this.btntxt = this.time + \"s后重新获取\";\n        setTimeout(this.timer, 1000);\n      } else {\n        this.time = 0;\n        this.btntxt = \"获取验证码\";\n        this.disabled = false;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.editAccounts {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  background-image: url(\"../../assets/images/loginbg.jpg\");\n  background-size: cover;\n}\n.editAccountsform {\n  border-radius: 6px;\n  background: #cccc;\n  width: 400px;\n  padding: 0px 25px 5px 25px;\n  .el-input {\n    height: 38px;\n    input {\n      height: 38px;\n    }\n  }\n  .input-icon {\n    height: 39px;\n    width: 14px;\n    margin-left: 2px;\n  }\n}\n.title {\n  margin: 0px auto 30px auto;\n  text-align: center;\n  color: #707070;\n  padding-top: 20px;\n}\n</style>\n"]}]}