{"remainingRequest":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\jusheng1\\src\\views\\basicdata\\paymentprocess\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\jusheng1\\src\\views\\basicdata\\paymentprocess\\index.vue","mtime":1627990487438},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0VXNlclBheUZsb3dTZXRMaXN0LCBnZXRVc2VyUGF5Rmxvd1NldFVzZVVzZXJMaXN0LCBwYXlGbG93U2V0UmVtb3ZlLHBheUZsb3dTZXRBZGR9IGZyb20gIkAvYXBpL3BheW1lbnRwcm9jZXNzL2luZGV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICB2YWx1ZTogZmFsc2UsCiAgICAgIGFwcHJvdmVzOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGNpdGllczogW10sCiAgICAgIGNpdGllc1ZhbHVlOiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CgogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CgogICAgLyoqCiAgICAgKiDojrflj5blrqHmibnphY3nva7kv6Hmga8KICAgICAqICovCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwoKICAgICAgdGhpcy5hcHByb3ZlcyA9IFt7fV07CiAgICAgIGdldFVzZXJQYXlGbG93U2V0TGlzdChudWxsKS50aGVuKHJlc3BvbnNlID0+IHsKCiAgICAgICAgaWYgKHJlc3BvbnNlICE9IG51bGwpIHsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSBudWxsICYmIHJlc3BvbnNlLmNvZGUgIT0gdW5kZWZpbmVkICYmIHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwgJiYgcmVzcG9uc2UuZGF0YSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBjb25zdCBkYXRhTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgdGhpcy5hcHByb3ZlcyA9IGRhdGFMaXN0OwogICAgICAgICAgICB9CgogICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKCgogICAgLyoqCiAgICAgKiDngrnlh7vmt7vliqDlrqHmibnkuroKICAgICAqLwogICAgZ2V0QXBwcm92ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgIGdldFVzZXJQYXlGbG93U2V0VXNlVXNlckxpc3QobnVsbCkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsKSB7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gbnVsbCAmJiByZXNwb25zZS5jb2RlICE9IHVuZGVmaW5lZCAmJiByZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSBudWxsICYmIHJlc3BvbnNlLmRhdGEgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgY29uc3QgZGF0YUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIHRoaXMuY2l0aWVzPWRhdGFMaXN0OwogICAgICAgICAgICAgIC8vIGFsZXJ0KGRhdGFMaXN0Lmxlbmd0aCkKICAgICAgICAgICAgfQoKICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKCgogICAgfSwKCiAgICAvKioKICAgICAqIOaPkOS6pOa3u+WKoOWuoeaJueS6ugogICAgICoKICAgICAgKi8KICAgIHN1Ym1pdEFwcHJvdmUoKSB7CiAgICAgLy8gYWxlcnQodGhpcy5jaXRpZXNWYWx1ZSkKICAgICAgbGV0IGF1ZGl0VXNlcklkID0gdGhpcy5jaXRpZXNWYWx1ZQoKICAgICAgaWYoYXVkaXRVc2VySWQ9PW51bGwgfHwgYXVkaXRVc2VySWQ9PScnIHx8IGF1ZGl0VXNlcklkLmxlbmd0aD09MCl7CiAgICAgICAgdGhpcy5tc2dFcnJvcigi6K+36YCJ5oup5LiA5Liq5a6h5om55Lq6Iik7CgogICAgICB9ZWxzZSB7CiAgICAgIHBheUZsb3dTZXRBZGQoYXVkaXRVc2VySWQpLnRoZW4ocmVzcG9uc2UgPT4gewoKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSAhPSBudWxsICYmIHJlc3BvbnNlLmNvZGUgIT0gdW5kZWZpbmVkICYmIHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MocmVzcG9uc2UubXNnKTsKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCLmk43kvZzlpLHotKUiKTsKICAgICAgICB9CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuY2l0aWVzVmFsdWU9Jyc7CiAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIGlmIChhcHByb3ZlKSB7CiAgICAgIC8vICAgdGhpcy5hcHByb3Zlcy5wdXNoKGFwcHJvdmUpCiAgICAgIC8vICAgdGhpcy5hcHByb3ZlID0gJyc7CiAgICAgIC8vIH0KICAgIH0sCiAgICAvL2RlbAogICAgaGFuZGxlQ2xvc2UoaSkgewogICAgICBjb25zb2xlLmxvZyhpKTsKCiAgICAgIGNvbnN0IGF1ZGl0TmFtZSA9IHRoaXMuYXBwcm92ZXNbaV0uYXVkaXROYW1lOwogICAgICBjb25zdCBzZXRJZCA9IHRoaXMuYXBwcm92ZXNbaV0uc2V0SWQ7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWPlua2iOWuoeaJueS6uu+8miInICsgYXVkaXROYW1lICsgJyI/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIC8vIHRoaXMubXNnU3VjY2VzcyhzZXRJZCk7CgogICAgICAgIHBheUZsb3dTZXRSZW1vdmUoc2V0SWQpLnRoZW4ocmVzcG9uc2UgPT4gewoKICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlICE9IG51bGwgJiYgcmVzcG9uc2UuY29kZSAhPSB1bmRlZmluZWQgJiYgcmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgIHRoaXMuYXBwcm92ZXMuc3BsaWNlKGksIDEpCgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5tc2dFcnJvcigi5pON5L2c5aSx6LSlIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICB9KS5jYXRjaCgoKSA9PiB7CgoKICAgICAgfSk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basicdata/paymentprocess","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"form\" label-width=\"140px\">\n      <!--        <el-form-item label=\"审核流程是否开启\">-->\n      <!--          <el-switch-->\n      <!--            v-model=\"value\"-->\n      <!--            active-color=\"#13ce66\"-->\n      <!--            inactive-color=\"#ccc\">-->\n      <!--          </el-switch>-->\n      <!--        </el-form-item>-->\n      <div>\n        <el-form-item label=\"审核流程配置\">\n          <el-tag\n            v-bind:key=\"item.setId\"\n            class=\"mr10\"\n            v-for=\"(item,index) in approves\"\n            closable\n            :disable-transitions=\"false\"\n            @close=\"handleClose(index)\">\n            {{item.auditName}}\n          </el-tag>\n          <el-button @click=\"getApprove\" size=\"mini\">+添加审批人</el-button>\n        </el-form-item>\n        <div class=\"\" style=\"margin-top: 60px\">\n          <el-steps align-center>\n            <el-step v-for=\"(item,index) in approves\" v-bind:key=\"item.setId\" :title=\"'第'+(index+1)+'步审批人'\"\n                     :description=\"item.auditName\"></el-step>\n          </el-steps>\n        </div>\n      </div>\n    </el-form>\n\n    <el-dialog\n      title=\"选择审批人\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n    >\n\n      <el-form ref=\"form\" :model=\"form\" >\n<!--        <el-form-item label=\"选择处理人\">-->\n<!--          <el-input v-model=\"approve\"></el-input>-->\n<!--        </el-form-item>-->\n        <template>\n          <el-select v-model.trim=\"citiesValue\" placeholder=\"请选择审批人\"   style=\"width: 400px;\">\n            <el-option style=\"width: 300px\"\n              v-for=\"item in cities\"\n              :key=\"item.auditUserId\"\n              :label=\"item.auditName\"\n              :value=\"item.auditUserId\">\n              <span style=\"float: left\">{{ item.auditName  }}</span>\n              <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.companyName}}</span>\n            </el-option>\n          </el-select>\n        </template>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"submitApprove()\">确 定</el-button>\n        </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {getUserPayFlowSetList, getUserPayFlowSetUseUserList, payFlowSetRemove,payFlowSetAdd} from \"@/api/paymentprocess/index\";\n\n  export default {\n\n    data() {\n      return {\n        form: {},\n        value: false,\n        approves: [],\n        dialogVisible: false,\n        cities: [],\n        citiesValue: ''\n      };\n    },\n    mounted() {\n\n      this.getList();\n    },\n    methods: {\n\n      /**\n       * 获取审批配置信息\n       * */\n      getList() {\n        this.loading = true;\n\n        this.approves = [{}];\n        getUserPayFlowSetList(null).then(response => {\n\n          if (response != null) {\n\n            if (response.code != null && response.code != undefined && response.code == 200) {\n              if (response.data != null && response.data != undefined) {\n                const dataList = response.data;\n                this.approves = dataList;\n              }\n\n            }\n\n          }\n          this.loading = false;\n        });\n      },\n\n\n      /**\n       * 点击添加审批人\n       */\n      getApprove() {\n        this.dialogVisible = true;\n        this.loading = true;\n\n        getUserPayFlowSetUseUserList(null).then(response => {\n\n          if (response != null) {\n\n            if (response.code != null && response.code != undefined && response.code == 200) {\n              if (response.data != null && response.data != undefined) {\n                const dataList = response.data;\n                this.cities=dataList;\n                // alert(dataList.length)\n              }\n\n            }\n\n          }\n          this.loading = false;\n        });\n\n\n      },\n\n      /**\n       * 提交添加审批人\n       *\n        */\n      submitApprove() {\n       // alert(this.citiesValue)\n        let auditUserId = this.citiesValue\n\n        if(auditUserId==null || auditUserId=='' || auditUserId.length==0){\n          this.msgError(\"请选择一个审批人\");\n\n        }else {\n        payFlowSetAdd(auditUserId).then(response => {\n\n          if (response.code != null && response.code != undefined && response.code == 200) {\n            this.msgSuccess(response.msg);\n            this.getList();\n          } else {\n            this.msgError(\"操作失败\");\n          }\n            this.dialogVisible = false\n          this.citiesValue='';\n        });\n        }\n        // if (approve) {\n        //   this.approves.push(approve)\n        //   this.approve = '';\n        // }\n      },\n      //del\n      handleClose(i) {\n        console.log(i);\n\n        const auditName = this.approves[i].auditName;\n        const setId = this.approves[i].setId;\n        this.$confirm('是否确认取消审批人：\"' + auditName + '\"?', \"警告\", {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          // this.msgSuccess(setId);\n\n          payFlowSetRemove(setId).then(response => {\n\n            if (response.code != null && response.code != undefined && response.code == 200) {\n              this.msgSuccess(response.msg);\n              this.approves.splice(i, 1)\n\n            } else {\n              this.msgError(\"操作失败\");\n            }\n          });\n\n        }).catch(() => {\n\n\n        });\n      }\n    },\n  };\n</script>\n"]}]}