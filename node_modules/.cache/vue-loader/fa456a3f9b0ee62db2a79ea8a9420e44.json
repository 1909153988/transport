{"remainingRequest":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\jusheng1\\src\\views\\basicdata\\usercenter\\index.vue?vue&type=style&index=0&id=3ebd0258&lang=scss&scoped=true&","dependencies":[{"path":"D:\\项目\\jusheng1\\src\\views\\basicdata\\usercenter\\index.vue","mtime":1627990487443},{"path":"D:\\项目\\jusheng1\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWRpdmlkZXItLXZlcnRpY2FsIHsKICB3aWR0aDogNXB4OwogIGhlaWdodDogMS41ZW07CiAgYmFja2dyb3VuZC1jb2xvcjogIzE4OTBmZjsKfQoKLmVsLXJvdyB7CiAgcGFkZGluZy1sZWZ0OiA0NnB4OwogIG1hcmdpbi1ib3R0b206IDIwcHg7CgogICY6bGFzdC1jaGlsZCB7CiAgICBtYXJnaW4tYm90dG9tOiAwOwogIH0KfQoKLmZvbnRib2xkIHsKICAvLyBmb250LXdlaWdodDogYm9sZDsKfQoKLmVsLWNvbCB7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGZvbnQtc2l6ZTogMTVweDsKfQoKLmJnLXB1cnBsZS1kYXJrIHsKICBiYWNrZ3JvdW5kOiAjOTlhOWJmOwp9CgouZ3JpZC1jb250ZW50IHsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgbWluLWhlaWdodDogMzZweDsKfQoKLnJvdy1iZyB7CiAgcGFkZGluZzogMTBweCAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmOWZhZmM7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4bA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/basicdata/usercenter","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"mb20\">\n      <!-- <el-divider direction=\"vertical\" /> <span class=\"weight\">基本资料</span> -->\n      <el-divider content-position=\"left\">基本资料</el-divider>\n    </div>\n\n    <el-row :gutter=\"20\" style=\"margin-top:40px\">\n\n\n      <el-col :span=\"8\" v-if=\"pageInfo.identity=='1'\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">公司名称: {{pageInfo.shipperFullName}}</div>\n      </el-col>\n\n      <el-col :span=\"8\" v-else-if=\"pageInfo.identity=='0'\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">姓名: {{pageInfo.businessPersonName}}</div>\n      </el-col>\n\n\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple\">\n          <el-button\n            style=\"margin-right: 10px\"\n            type=\"success\"\n            size=\"mini\"\n            icon=\"el-icon-check\"\n            circle\n          ></el-button\n          >\n          {{pageInfo.status=='0'?'待审核':pageInfo.status=='1'?'认证通过':pageInfo.status=='3'?'认证未通过':'未知'}}\n        </div>\n      </el-col\n      >\n    </el-row>\n    <el-row :gutter=\"20\" v-if=\"pageInfo.identity=='1'\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">统一社会信用代码：{{pageInfo.societyCreditCode}}</div>\n      </el-col\n      >\n\n    </el-row>\n\n    <el-row :gutter=\"20\" v-else-if=\"pageInfo.identity=='0'\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">身份证号码：{{pageInfo.idCardNumber}}</div>\n      </el-col\n      >\n\n    </el-row>\n\n\n    <el-row :gutter=\"20\" v-if=\"pageInfo.identity=='1'\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">法定代表人：{{pageInfo.businessPersonName}}</div>\n      </el-col\n      >\n    </el-row>\n\n\n    <el-row :gutter=\"20\" v-if=\"pageInfo.identity=='0'\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">联系手机号：{{pageInfo.contactPhone}}</div>\n      </el-col\n      >\n    </el-row>\n\n\n    <el-row :gutter=\"20\" v-if=\"pageInfo.identity=='1'\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">认证联系人：{{pageInfo.legalPersonName}}</div>\n      </el-col\n      >\n      <el-col :span=\"8\">\n        <div class=\"grid-content bg-purple\"  v-hasPermi=\"['consign:clientData:getUserClientAuthInfo']\" >\n          <el-link type=\"primary\" @click=\"goFrist()\">查看认证信息</el-link>\n        </div>\n      </el-col>\n    </el-row>\n\n\n    <el-row :gutter=\"20\">\n      <el-col :span=\"8\">\n        <div class=\"grid-content bg-purple fontbold\">\n          联系人手机号：{{pageInfo.contactPhone}}\n        </div>\n      </el-col\n      >\n    </el-row>\n\n    <div class=\"mb20\">\n      <el-divider content-position=\"left\">安全设置</el-divider>\n    </div>\n\n    <el-row :gutter=\"20\" style=\"margin-top:40px\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">登录名: {{pageInfo.userName}}</div>\n      </el-col\n      >\n<!--      <el-col :span=\"8\"-->\n<!--      >-->\n<!--        <div class=\"grid-content bg-purple\">-->\n<!--          <el-link type=\"primary\" @click=\"loginnamedialogVisible = true\"-->\n<!--          >修改登录名-->\n<!--          </el-link-->\n<!--          >-->\n<!--        </div>-->\n<!--      </el-col-->\n<!--      >-->\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">登录手机号: {{pageInfo.phoneNumber}}</div>\n      </el-col\n      >\n\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple\">\n          <el-link type=\"primary\" @click=\"phonedialogVisible = true\"\n          >修改手机号\n          </el-link\n          >\n        </div>\n      </el-col\n      >\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple fontbold\">登录密码：**********</div>\n      </el-col\n      >\n      <el-col :span=\"8\"\n      >\n        <div class=\"grid-content bg-purple\">\n          <el-link type=\"primary\" @click=\"passworddialogVisible = true\"\n          >修改密码\n          </el-link\n          >\n        </div>\n      </el-col\n      >\n    </el-row>\n\n\n    <!-- 修改手机号码弹框 -->\n    <el-dialog\n      title=\"修改手机号码\"\n      :visible.sync=\"phonedialogVisible\"\n      width=\"30%\"\n    >\n      <el-form\n        :model=\"phoneform\"\n        ref=\"phoneformrules\"\n        :rules=\"phoneformrules\"\n\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"当前密码\" prop=\"oldPassword\">\n          <el-input prefix-icon=\"el-icon-unlock\" placeholder=\"请输入密码\" v-model=\"phoneform.oldPassword\"\n                    show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"原手机号\">\n          <el-input v-model=\"pageInfo.phoneNumber\" readonly disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"新手机号\" prop=\"phoneNumber\">\n          <el-input v-model=\"phoneform.phoneNumber\" placeholder=\"请输入新的手机号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"验证码\" prop=\"code\">\n          <el-input v-model=\"phoneform.code\" autocomplete=\"off\" placeholder=\"请输入验证码\">\n\n          </el-input>\n          <el-button\n            style=\"height: 36px\"\n            type=\"button\"\n            size=\"mini\"\n            @click=\"getSendcode\"\n            :disabled=\"disabled\"\n            v-if=\"disabled == false\"\n          >获取验证码\n          </el-button>\n          <el-button\n            type=\"button\"\n            :disabled=\"disabled\"\n            v-if=\"disabled == true\"\n          >{{ btntxt }}\n          </el-button>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"phonedialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"updatePhone\"\n        >保存</el-button>\n      </div>\n    </el-dialog>\n\n\n    <!-- 修改密码弹框 -->\n    <el-dialog\n      title=\"修改密码\"\n      :visible.sync=\"passworddialogVisible\"\n      width=\"30%\"\n    >\n      <el-form\n        :model=\"pwdform\"\n        ref=\"pwdformrules\"\n        :rules=\"pwdformrules\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\">\n\n        <el-form-item label=\"当前密码\" prop=\"oldPassword\">\n          <el-input prefix-icon=\"el-icon-unlock\" placeholder=\"请输入当前密码\" v-model=\"pwdform.oldPassword\"\n                    show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"password\">\n          <el-input prefix-icon=\"el-icon-unlock\" placeholder=\"请输入新密码\" v-model=\"pwdform.password\"\n                    show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"conPassword\">\n          <el-input prefix-icon=\"el-icon-unlock\" placeholder=\"确认密码\" v-model=\"pwdform.conPassword\"\n                    show-password></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"passworddialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"updatePassWord\">保存</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {getPhoneCode, getUserInfo, toUpdatePassWord,toUpdatePhone} from \"@/api/client/userInfo\";\n\n  export default {\n    data() {\n      return {\n\n        // loginnamedialogVisible: false, //修改登录名弹框\n        phonedialogVisible: false, //修改手机号弹框\n        passworddialogVisible: false, //修改密码弹框\n\n\n        // 页面数据\n        pageInfo: {},\n\n        //修改密码\n        pwdform: {\n          oldPassword: null,\n          password: null,\n          conPassword: null,\n          userId: null\n        },\n\n        //修改手机\n        phoneform: {\n          oldPassword: null,\n          phoneNumber: null,\n          code: null,\n          userId: null\n        },\n\n        // 表单校验 修改密码\n        pwdformrules: {\n\n          oldPassword: [\n            {required: true, message: \"请输入当前认证账号密码\", trigger: \"blur\"}\n          ],\n          password: [\n            {required: true, message: \"请输入新密码\", trigger: \"blur\"}\n          ],\n\n          conPassword: [\n            {required: true, message: \"请确认新密码\", trigger: \"blur\"}\n          ],\n        },\n\n\n        disabled: false,\n        time: 0,\n        btntxt: \"重新发送\",\n\n        // 表单校验 修改手机号\n\n        phoneformrules: {\n          oldPassword: [\n            {required: true, message: \"请输入当前认证账号密码\", trigger: \"blur\"}\n          ],\n          phoneNumber: [\n            {required: true, message: \"请输入新手机号\", trigger: \"blur\"}\n          ],\n          code: [\n            {required: true, message: \"请输入验证码\", trigger: \"blur\"}\n          ],\n        },\n\n      };\n    },\n    created() {\n      this.toUserInfo();\n    },\n    methods: {\n      //查询用户信息\n      toUserInfo() {\n        this.loading = true;\n        getUserInfo().then(response => {\n\n          if (response != null && response.code === 200) {\n\n            const datas = response.data;\n            if (datas != null) {\n              const identity = datas.identity;\n              if (identity == '1') { //企业类型\n                console.log(\"企业类型\");\n\n                this.pageInfo = datas;\n\n              } else if (identity == '0') { //个人\n                console.log(\"个人\");\n                this.pageInfo = datas;\n\n              }\n\n            }\n\n\n          } else {\n            this.msgSuccess(\"查询失败\");\n          }\n          this.loading = false;\n        });\n      },\n\n      ///修改密码\n      updatePassWord() {\n\n        this.$refs['pwdformrules'].validate(valid => {\n          if (valid) {\n\n            if (this.pageInfo.userId != null) {\n              this.pwdform.userId = this.pageInfo.userId;\n\n              toUpdatePassWord(this.pwdform).then(response => {\n                if (response.code === 200) {\n                  this.msgSuccess('更新成功');\n                  this.pwdform = {};\n                  this.passworddialogVisible = false;\n                } else {\n                  this.msgError('更新失败');\n                }\n              })\n\n            } else {\n              this.msgError('用户信息异常！')\n            }\n          } else {\n            this.msgError('请完成必填项！')\n          }\n        })\n\n\n      },\n\n//修改手机\n      updatePhone() {\n\n        this.$refs['phoneformrules'].validate(valid => {\n          if (valid) {\n\n            if (this.pageInfo.userId != null) {\n              this.phoneform.userId = this.pageInfo.userId;\n\n              toUpdatePhone(this.phoneform).then(response => {\n\n                if (response.code === 200) {\n                  this.msgSuccess('更新成功');\n                  this.phoneform = {};\n                  this.phonedialogVisible = false;\n                } else {\n                  this.msgError('更新失败');\n                }\n              })\n\n            } else {\n              this.msgError('用户信息异常！')\n            }\n          } else {\n            this.msgError('请完成必填项！')\n          }\n        })\n\n\n      },\n      //获取验证码的接口\n      getSendcode() {\n\n        getPhoneCode(this.phoneform.phoneNumber, \"reg\").then((res) => {\n          this.time = 60;\n          this.disabled = true;\n          this.timer();\n\n          if (res.code == 200) {\n            this.msgSuccess(res.msg);\n          } else {\n            this.msgError(res.msg);\n          }\n        });\n      },\n      //60S倒计时\n      timer() {\n        if (this.time > 0) {\n          this.time--;\n          this.btntxt = this.time + \"s后重新获取\";\n          setTimeout(this.timer, 1000);\n        } else {\n          this.time = 0;\n          this.btntxt = \"获取验证码\";\n          this.disabled = false;\n        }\n      },\n\n\n      //跳转查看认证信息\n      goFrist() {\n        this.$router.push(\"/basicdata/fristenterprise\");\n      },\n\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .el-divider--vertical {\n    width: 5px;\n    height: 1.5em;\n    background-color: #1890ff;\n  }\n\n  .el-row {\n    padding-left: 46px;\n    margin-bottom: 20px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  .fontbold {\n    // font-weight: bold;\n  }\n\n  .el-col {\n    border-radius: 4px;\n    font-size: 15px;\n  }\n\n  .bg-purple-dark {\n    background: #99a9bf;\n  }\n\n  .grid-content {\n    border-radius: 4px;\n    min-height: 36px;\n  }\n\n  .row-bg {\n    padding: 10px 0;\n    background-color: #f9fafc;\n  }\n</style>\n"]}]}