{"remainingRequest":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\jusheng1\\src\\views\\waybillmangment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\jusheng1\\src\\views\\waybillmangment\\index.vue","mtime":1627990492639},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsKICAgIGRlbHl1bmRhbiwKICAgIGdldGZ1a3VhbiwKICAgIGdldFNlbGVjdEJpbGxTZXJ2aWNlQ2hhcmdlLAogICAgZ2V0c2hhbmdiYW8sCiAgICBzdWJmdWt1YW4sCiAgICB0b1NlbmRDYXJSZXBvcnRlZCwKICAgIHRvdW5sb2FkLAogICAgdXNlcmJhbGFuY2UsCiAgICB3YXliaWxsbGlzdAogIH0gZnJvbSAiQC9hcGkvd2F5YmlsbC93YXliaWxsbGlzdCI7CiAgaW1wb3J0IGNvcHlUZXh0IGZyb20gIkAvdXRpbHMvY2xpcGJvYXJkLmpzIjsKICBpbXBvcnQgRmlsZVVwbG9hZCBmcm9tICJAL2NvbXBvbmVudHMvRmlsZVVwbG9hZC9pbmRleCIKICBpbXBvcnQgSW1hZ2VVcGxvYWQgZnJvbSAiQC9jb21wb25lbnRzL0ltYWdlVXBsb2FkL2luZGV4IjsKICBpbXBvcnQge2dldFRva2VufSBmcm9tICJAL3V0aWxzL2F1dGgiOwoKICBleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHNpd3RjaFN0ZXRlOiBmYWxzZSwvL+aYr+WQpuS9v+eUqOi/lOWIqQogICAgICAgIGltcG9ydERyaXZlclVybDogJy93YXliaWxsL3B1YmxpY1VwbG9hZEZpbGUvdXBsb2FkRmlsZScsCiAgICAgICAgdGV4dDogJ+WvvOWFpScsCiAgICAgICAgd2F0ZXJmb3JtOiB7fSwgLy/ov5DljZXnlLPor7fku5jmrL4g5rC06Lev6L+Q6L6TCiAgICAgICAgYmF0Y2hmb3JtOiB7fSwvL+i/kOWNleeUs+ivt+S7mOasvijmibnph48pCiAgICAgICAgc3VtY291bnQ6IDAsLy/pgInmi6nnlLPor7fku5jmrL7ljZXnmoTmlbDph48KICAgICAgICBmdWt1YW5hcnI6IFtdLC8v6I635Y+W6KGo5qC855Sz6K+35LuY5qy+aWQKICAgICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgICBpZHM6IFtdLAogICAgICAgIHNpbmdsZTogdHJ1ZSwKICAgICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgICBjdW5hcnI6IFtdLC8v5L+d5a2Y6KGo5qC855Sz6K+35LuY5qy+aWTmi7zmjqUKICAgICAgICBwaWNrZXJPcHRpb25zU3RhcnQ6IHsKICAgICAgICAgIGRpc2FibGVkRGF0ZTogKHRpbWUpID0+IHsKICAgICAgICAgICAgbGV0IGVuZERhdGVWYWwgPSB0aGlzLnF1ZXJ5UGFyYW1zLmVuZFRpbWU7CiAgICAgICAgICAgIGlmIChlbmREYXRlVmFsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpID4gbmV3IERhdGUoZW5kRGF0ZVZhbCkuZ2V0VGltZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgcGlja2VyT3B0aW9uc0VuZDogewogICAgICAgICAgZGlzYWJsZWREYXRlOiAodGltZSkgPT4gewogICAgICAgICAgICBsZXQgYmVnaW5EYXRlVmFsID0gdGhpcy5xdWVyeVBhcmFtcy5zdGFydFRpbWU7CiAgICAgICAgICAgIGlmIChiZWdpbkRhdGVWYWwpIHsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgdGltZS5nZXRUaW1lKCkgPAogICAgICAgICAgICAgICAgbmV3IERhdGUoYmVnaW5EYXRlVmFsKS5nZXRUaW1lKCkgLSAxICogMjQgKiA2MCAqIDYwICogMTAwMCArIDEKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgaW5wdXQ6ICcnLAogICAgICAgIFR3b1Zpc2libGU6IGZhbHNlLC8v56ys5LqM5pS25qy+5Lq65Y2V56Wo5by55qGGCiAgICAgICAgc2hlbmdxaW5nZm9ybTogewogICAgICAgICAgY2hhdWZmZXVyTW9uZXk6IDAsCiAgICAgICAgICBhbm90aGVyUGF5ZWVNb25leTogMCwKICAgICAgICAgIHJlYmF0ZU1vbmV5OiAwLAogICAgICAgICAgaXNSZWJhdGU6IGZhbHNlCiAgICAgICAgfSwvL+i/kOWNleeUs+ivt+S7mOasvijljZXnpagp56ys5LqM5pS25qy+5Lq6CiAgICAgICAgZmFjaGVmb3JtOiB7fSwgLy/lj5HovabkuIrmiqXooajljZUKICAgICAgICBxaWFuc2hvdWZvcm06IHt9LC8v562+5pS26KGo5Y2VCiAgICAgICAgdmFsdWU6IHRydWUsCiAgICAgICAgZm9ybToge30sCiAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICBydWxlczoge30sCiAgICAgICAgcmFkaW86IDAsCiAgICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgICBzZWxlbGN0aXNTaG93OiB0cnVlLAogICAgICAgIHRpbWU6IFtdLAogICAgICAgIHNlbGVjdGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgIGRpYWxvZ1Zpc2libGUxOiBmYWxzZSwKICAgICAgICBkaWFsb2dWaXNpYmxlMjogZmFsc2UsCiAgICAgICAgZnVrdWFuZGlhbG9nVmlzaWJsZTE6IGZhbHNlLAogICAgICAgIGZ1a3VhbmRpYWxvZ1Zpc2libGUyOiBmYWxzZSwKICAgICAgICBmdWt1YW5kaWFsb2dWaXNpYmxlMzogZmFsc2UsCiAgICAgICAgZnVrdWFuZGlhbG9nVmlzaWJsZTQ6IGZhbHNlLAogICAgICAgIHVzZXJtb25rZXk6IDAsCiAgICAgICAgZXJyU2VydmljZUNoYXJnZTogIiIsIC8v6K6h6LS56ZSZ6K+v5L+h5oGvCiAgICAgICAgaXNCYXRjaDogZmFsc2UsIC8v5piv5ZCm5om56YePCiAgICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgICB0b3RhbDogMCwvL+aAu+adoeaVsAogICAgICAgIC8vIOafpeivouWPguaVsAogICAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgICAgc3RhcnRUaW1lOiB1bmRlZmluZWQsIC8v5byA5aeL5pe26Ze0CiAgICAgICAgICBlbmRUaW1lOiB1bmRlZmluZWQsIC8v57uT5p2f5pe26Ze0CiAgICAgICAgICBjYXJyaWFnZVN0YXRlOiB1bmRlZmluZWQsLy/ov5DljZXnirbmgIEKICAgICAgICAgIG9mdGVuUGF0aE5hbWU6IHVuZGVmaW5lZCwgLy/liJvlu7rnur/ot6/lkI3np7AKICAgICAgICAgIGdvb2RzTmFtZTogdW5kZWZpbmVkLCAvL+i0p+eJqeWQjeensAogICAgICAgICAgZGVsaXZlckNvbnRhY3RzUHJvdmluY2U6IHVuZGVmaW5lZCwgLy/oo4XotKflnLDngrkKICAgICAgICAgIHRha2VDb250YWN0c1Byb3ZpbmNlOiB1bmRlZmluZWQsIC8v5Y246LSn5Zyw54K5CiAgICAgICAgICBkZWxpdmVyQ29udGFjdHM6IHVuZGVmaW5lZCwgLy/lj5HotKfogZTns7vkuroKICAgICAgICAgIGNhcnJpYWdlSWQ6IHVuZGVmaW5lZCwgLy/ov5DljZXlj7cKICAgICAgICAgIHJlbGV2YW5jZUNvZGU6IHVuZGVmaW5lZCwgLy/lrqLmiLfljZXlj7cv6K6i5Y2V5Y+3CiAgICAgICAgICB2ZWhpY2xlTnVtYmVyOiB1bmRlZmluZWQsLy/ovaboiLnlj7cKICAgICAgICAgIGNoZWNrU3RhdGU6IHVuZGVmaW5lZCwvL+WuoeaguOeKtuaAgQogICAgICAgICAgcGF5U3RhdGU6IHVuZGVmaW5lZCwvL+aUr+S7mOeKtuaAgQogICAgICAgICAgaWZJbnZvaWNlOiB1bmRlZmluZWQsLy/lvIDnpajnirbmgIEKICAgICAgICAgIHBheWVlTmFtZTogdW5kZWZpbmVkLC8v5Y+45py65aeT5ZCNCiAgICAgICAgfSwKICAgICAgICB5dW5kYW5vcHRpb25zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBsYWJlbDogIuiNieeovyIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgICAgbGFiZWw6ICLlt7Lmj5DkuqQiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICAgIGxhYmVsOiAi5bey5YiG6YWN5om/6L+Q5Lq6IiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAzLAogICAgICAgICAgICBsYWJlbDogIuW3suaOpeWNlSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICAgICAgbGFiZWw6ICLmj5DotKfkuK0iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDUsCiAgICAgICAgICAgIGxhYmVsOiAi5Y+R6L2m5LitIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiA2LAogICAgICAgICAgICBsYWJlbDogIuW3suWIsOi+viIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogNywKICAgICAgICAgICAgbGFiZWw6ICLljbjotKfkuK0iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDgsCiAgICAgICAgICAgIGxhYmVsOiAi5bey562+5pS2IiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiA5LAogICAgICAgICAgICBsYWJlbDogIuW3suS9nOW6nyIsCiAgICAgICAgICB9CiAgICAgICAgXSwgLy/ov5DljZXnirbmgIHov5DljZXnirbmgIE6CiAgICAgICAgY2hlY2tvcHRpb25zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBsYWJlbDogIuiNieeovyIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgICAgbGFiZWw6ICLlt7Lmj5DkuqQiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICAgIGxhYmVsOiAi5bey5YiG6YWN5om/6L+Q5Lq6IiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAzLAogICAgICAgICAgICBsYWJlbDogIuW3suaOpeWNlSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICAgICAgbGFiZWw6ICLmj5DotKfkuK0iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDUsCiAgICAgICAgICAgIGxhYmVsOiAi5Y+R6L2m5LitIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiA2LAogICAgICAgICAgICBsYWJlbDogIuW3suWIsOi+viIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogNywKICAgICAgICAgICAgbGFiZWw6ICLljbjotKfkuK0iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDgsCiAgICAgICAgICAgIGxhYmVsOiAi5bey562+5pS2IiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiA5LAogICAgICAgICAgICBsYWJlbDogIuW3suS9nOW6nyIsCiAgICAgICAgICB9CiAgICAgICAgXSwgLy/ov5DljZXlrqHmoLjnirbmgIEKICAgICAgICBwYXlvcHRpb25zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBsYWJlbDogIuacquS7mOasviIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgICAgbGFiZWw6ICLpg6jliIbku5jmrL4iLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICAgIGxhYmVsOiAi5bey57uT5riFIiwKICAgICAgICAgIH0KICAgICAgICBdLCAvL+i/kOWNleaUr+S7mOeKtuaAgQogICAgICAgIGlmb3B0aW9uczogWwogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgbGFiZWw6ICLkuI3lvIAiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgICAgIGxhYmVsOiAi5byAIiwKICAgICAgICAgIH0KICAgICAgICBdLCAvL+W8gOelqOeKtuaAgQogICAgICAgIGZhY2hlb3B0aW9uczogWwogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgICAgbGFiZWw6ICLlkKgiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgICAgIGxhYmVsOiAi5pa5IiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbHVlOiAzLAogICAgICAgICAgICBsYWJlbDogIuS7tiIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB2YWx1ZTogNCwKICAgICAgICAgICAgbGFiZWw6ICLmlbTovaYiLAogICAgICAgICAgfSwKICAgICAgICBdLCAvL+ijhei0p+aVsOmHj+WNleS9jQoKCiAgICAgICAgdXBsb2FkSW1nVXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgIi9maWxlL2ZpbGUvdXBsb2FkRmlsZSIsIC8vIOS4iuS8oOeahOWbvueJh+acjeWKoeWZqOWcsOWdgAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJDb25zaWduICIgKyBnZXRUb2tlbigpLAogICAgICAgIH0sCgogICAgICAgIC8v6KOF6LSnCiAgICAgICAgemhkaWFsb2dJbWFnZVVybDogJycsCiAgICAgICAgemhkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICB6aGZpbGVMaXN0OiBbXSwKCiAgICAgICAgLy8g5Y246LSnCiAgICAgICAgeGhkaWFsb2dJbWFnZVVybDogJycsCiAgICAgICAgeGhkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICB4aGZpbGVMaXN0OiBbXSwKCiAgICAgICAgLy/lhbbku5bljZXmja4KICAgICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgICAgb3RkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICBmaWxlTGlzdDogW10sCiAgICAgIH07CgogICAgfSwKCiAgICBjb21wb25lbnRzOiB7CiAgICAgIEZpbGVVcGxvYWQsCiAgICAgIEltYWdlVXBsb2FkCgogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICB0aGlzLmdldHVzZXJiYWxhbmNlKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICBoYW5kbGVDbG9zZShkb25lKSB7CiAgICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5YWz6Zet77yfJykKICAgICAgICAgIC50aGVuKF8gPT4gewogICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKF8gPT4gewogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIC8v5YWo6aKd5LuY5qy+5Y+45py6CiAgICAgIGFsbFBheUNoYXVmZmV1ck1vbmV5KCkgewogICAgICAgIHRoaXMuc2VsZWN0QmlsbFNlcnZpY2VDaGFyZ2UoKTsKICAgICAgICB0aGlzLnNoZW5ncWluZ2Zvcm0uY2hhdWZmZXVyTW9uZXkgPSB0aGlzLnNoZW5ncWluZ2Zvcm0ubm90Q2hhdWZmZXVyTW9uZXk7CiAgICAgIH0sCiAgICAgIC8v5YWo6aKd5LuY5qy+56ys5LqMCiAgICAgIGFsbFBheUFub3RoZXJQYXllZU1vbmV5KCkgewogICAgICAgIHRoaXMuc2VsZWN0QmlsbFNlcnZpY2VDaGFyZ2UoKTsKICAgICAgICB0aGlzLnNoZW5ncWluZ2Zvcm0uYW5vdGhlclBheWVlTW9uZXkgPSB0aGlzLnNoZW5ncWluZ2Zvcm0ubm90QW5vdGhlclBheWVlTW9uZXk7CiAgICAgIH0sCiAgICAgIC8v5a+55ZCm5L2/55So6L+U5YipCiAgICAgIGlzUmViYXRlQ2xpY2soKSB7CiAgICAgICAgaWYgKCF0aGlzLnNoZW5ncWluZ2Zvcm0uaXNSZWJhdGUpIHsKICAgICAgICAgIHRoaXMuc2hlbmdxaW5nZm9ybS5yZWJhdGVNb25leSA9IDA7CiAgICAgICAgfQogICAgICB9LAoKCiAgICAgIC8v6K6h566X6L+Q6LS555qE5pyN5Yqh6LS5CiAgICAgIHNlbGVjdEJpbGxTZXJ2aWNlQ2hhcmdlKCkgewogICAgICAgIGxldCBjaGF1ZmZldXJNb25leSA9IHRoaXMuc2hlbmdxaW5nZm9ybS5jaGF1ZmZldXJNb25leTsKICAgICAgICBsZXQgYW5vdGhlclBheWVlTW9uZXkgPSB0aGlzLnNoZW5ncWluZ2Zvcm0uYW5vdGhlclBheWVlTW9uZXk7CgogICAgICAgIGlmIChjaGF1ZmZldXJNb25leSAhPSB1bmRlZmluZWQgJiYgY2hhdWZmZXVyTW9uZXkgIT0gbnVsbCAmJiBjaGF1ZmZldXJNb25leS5sZW5ndGggPiAwKSB7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaGF1ZmZldXJNb25leSA9IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAoYW5vdGhlclBheWVlTW9uZXkgIT0gdW5kZWZpbmVkICYmIGFub3RoZXJQYXllZU1vbmV5ICE9IG51bGwgJiYgYW5vdGhlclBheWVlTW9uZXkubGVuZ3RoID4gMCkgewoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYW5vdGhlclBheWVlTW9uZXkgPSAwOwogICAgICAgIH0KICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmlkczsKICAgICAgICBjb25zdCBub3RGcmVpZ2h0U3VtID0gY2hhdWZmZXVyTW9uZXkgKyBhbm90aGVyUGF5ZWVNb25leTsKCiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJjYXJyaWFnZUlkIiwgaWRzKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIm5vdEZyZWlnaHRTdW0iLCBub3RGcmVpZ2h0U3VtKTsKCiAgICAgICAgdGhpcy5lcnJTZXJ2aWNlQ2hhcmdlID0gIiIsCiAgICAgICAgICB0aGlzLnNoZW5ncWluZ2Zvcm0uc2VydmljZUNoYXJnZSA9IDAsCiAgICAgICAgICBnZXRTZWxlY3RCaWxsU2VydmljZUNoYXJnZShmb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5lcnJTZXJ2aWNlQ2hhcmdlID0gIuiuoei0ueaIkOWKnyI7CiAgICAgICAgICAgICAgdGhpcy5zaGVuZ3Fpbmdmb3JtLnNlcnZpY2VDaGFyZ2UgPSByZXNwb25zZS5tc2c7CgogICAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgICAvLyB0aGlzLmVyclNlcnZpY2VDaGFyZ2UgPSByZXNwb25zZS5tc2c7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoaXMuZXJyU2VydmljZUNoYXJnZSA9IGVycjsKCiAgICAgICAgICB9KTsKICAgICAgfSwKCiAgICAgIC8v5o+Q5Lqk55Sz6K+35LuY5qy+CiAgICAgIHN1YmZ1a3VhbkZvcm0oKSB7CgogICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuaWRzOwoKICAgICAgICBpZiAoaWRzID09IHVuZGVmaW5lZCB8fCBpZHMgPT0gbnVsbCB8fCBpZHMubGVuZ3RoID09IDApIHsKICAgICAgICAgIHRoaXMubXNnRXJyb3IoIuivt+mAieaLqei/kOWNlSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcmVtYWtlID0gdGhpcy5zaGVuZ3Fpbmdmb3JtLnJlbWFrZTsKICAgICAgICBpZiAocmVtYWtlID09IHVuZGVmaW5lZCB8fCByZW1ha2UgPT0gbnVsbCB8fCByZW1ha2UubGVuZ3RoID09IDApIHsKICAgICAgICAgIHRoaXMubXNnRXJyb3IoIuivt+i+k+WFpeWkh+azqOi/kOWNlSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCgogICAgICAgIGxldCBpc1JlYmF0ZXMgPSAiMSI7CiAgICAgICAgaWYgKHRoaXMuc2hlbmdxaW5nZm9ybS5pc1JlYmF0ZSkgewogICAgICAgICAgaXNSZWJhdGVzID0gIjAiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNoZW5ncWluZ2Zvcm0ucmViYXRlTW9uZXkgPSAwOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgIGNhcnJpYWdlSWRzOiBpZHMudG9TdHJpbmcoKSwKICAgICAgICAgIGNoYXVmZmV1ck1vbmV5OiB0aGlzLnNoZW5ncWluZ2Zvcm0uY2hhdWZmZXVyTW9uZXksCiAgICAgICAgICBhbm90aGVyUGF5ZWVNb25leTogdGhpcy5zaGVuZ3Fpbmdmb3JtLmFub3RoZXJQYXllZU1vbmV5LAogICAgICAgICAgaXNSZWJhdGU6IGlzUmViYXRlcywKICAgICAgICAgIHJlYmF0ZU1vbmV5OiB0aGlzLnNoZW5ncWluZ2Zvcm0ucmViYXRlTW9uZXksCiAgICAgICAgICByZW1ha2U6IHRoaXMuc2hlbmdxaW5nZm9ybS5yZW1ha2UKICAgICAgICB9CgoKICAgICAgICBzdWJmdWt1YW4oZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZyk7CgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdGhpcy5tc2dFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKGVycik7CiAgICAgICAgfSk7CgogICAgICB9LAogICAgICAvL+aYvuekuuihqOagvOaYr+WQpuW8gOelqAogICAgICB5dW5zdGF0ZUZvcm1hdChyb3cpIHsKICAgICAgICBpZiAocm93LmlmSW52b2ljZSA9PSAwKSB7CiAgICAgICAgICByZXR1cm4gIuS4jeW8gCI7CiAgICAgICAgfSBlbHNlIGlmIChyb3cuaWZJbnZvaWNlID09IDEpIHsKICAgICAgICAgIHJldHVybiAi5byAIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8v5pi+56S66L+Q6L6T57G75Z6LCiAgICAgIHl1bnN0YXRlRm9ybWF0Mihyb3cpIHsKICAgICAgICBpZiAocm93LnRyYW5zcG9ydFR5cGUgPT0gMCkgewogICAgICAgICAgcmV0dXJuICLlhazot6/ov5DovpMiOwogICAgICAgIH0gZWxzZSBpZiAocm93LnRyYW5zcG9ydFR5cGUgPT0gMSkgewogICAgICAgICAgcmV0dXJuICLmsLTot6/ov5DovpMiOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy/mmL7npLrlrqHmoLjnirbmgIEKICAgICAgeXVuc3RhdGVGb3JtYXQzKHJvdykgewogICAgICAgIGlmIChyb3cuY2hlY2tTdGF0ZSA9PSAwKSB7CiAgICAgICAgICByZXR1cm4gIuW+heWuoeaguCI7CiAgICAgICAgfSBlbHNlIGlmIChyb3cuY2hlY2tTdGF0ZSA9PSAxKSB7CiAgICAgICAgICByZXR1cm4gIuWuoeaguOS4rSI7CiAgICAgICAgfSBlbHNlIGlmIChyb3cuY2hlY2tTdGF0ZSA9PSAyKSB7CiAgICAgICAgICByZXR1cm4gIuWuoeaguOmAmui/hyI7CiAgICAgICAgfSBlbHNlIGlmIChyb3cuY2hlY2tTdGF0ZSA9PSAzKSB7CiAgICAgICAgICByZXR1cm4gIuWuoeaguOS4jemAmui/hyI7CiAgICAgICAgfQogICAgICB9LAogICAgICAvL+S7mOasvueUs+ivt+eKtuaAgSAwLuacque7k+a4hSAxLuW3sue7k+a4hQogICAgICB5dW5zdGF0ZUZvcm1hdDQocm93KSB7CiAgICAgICAgaWYgKHJvdy5wYXltZW50U3RhdGUgPT0gMCkgewogICAgICAgICAgcmV0dXJuICLmnKrnu5PmuIUiOwogICAgICAgIH0gZWxzZSBpZiAocm93LnBheW1lbnRTdGF0ZSA9PSAxKSB7CiAgICAgICAgICByZXR1cm4gIuW3sue7k+a4hSI7CiAgICAgICAgfQogICAgICB9LAogICAgICAvL+i/kOWNleeKtuaAgTogMOiNieeovywxLuW3suaPkOS6pCAyLuW3suWIhumFjeaJv+i/kOS6uiAzLuW3suaOpeWNlSA0LuaPkOi0p+S4rSA1LuWPkei9puS4rSA2LuW3suWIsOi+viA3LuWNuOi0p+S4rSA4LuW3suetvuaUtiA5LuW3suS9nOW6nwogICAgICB5dW5zdGF0ZUZvcm1hdDUocm93KSB7CiAgICAgICAgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDApIHsKICAgICAgICAgIHJldHVybiAi6I2J56i/IjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDEpIHsKICAgICAgICAgIHJldHVybiAi5bey5o+Q5LqkIjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDIpIHsKICAgICAgICAgIHJldHVybiAi5bey5YiG6YWN5om/6L+Q5Lq6IjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDMpIHsKICAgICAgICAgIHJldHVybiAi5bey5o6l5Y2VIjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDQpIHsKICAgICAgICAgIHJldHVybiAi5o+Q6LSn5LitIjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDUpIHsKICAgICAgICAgIHJldHVybiAi5Y+R6L2m5LitIjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDYpIHsKICAgICAgICAgIHJldHVybiAi5bey5Yiw6L6+IjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDcpIHsKICAgICAgICAgIHJldHVybiAi5Y246LSn5LitIjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDgpIHsKICAgICAgICAgIHJldHVybiAi5bey562+5pS2IjsKICAgICAgICB9IGVsc2UgaWYgKHJvdy5jYXJyaWFnZVN0YXRlID09IDkpIHsKICAgICAgICAgIHJldHVybiAi5bey5L2c5bqfIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIOaPkOS6pOS4iuS8oOaWh+S7tgogICAgICBzdWJtaXRGaWxlRm9ybSgpIHsKICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsKICAgICAgfSwKICAgICAgLy/moLnmja7ov5DljZVpZOafpeivouetvuaUtu+8jOWPkei9puS4iuaKpeeahOS/oeaBrwogICAgICBnZXRidXMoY2FycmlhZ2VJZCwgaWQpIHsKICAgICAgICBnZXRzaGFuZ2JhbyhjYXJyaWFnZUlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgIGlmIChpZCA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZhY2hlZm9ybSA9IHJlc3BvbnNlLmRhdGE7CgoKICAgICAgICAgICAgICAgIC8v6KOF6LSn5Zu+54mHCiAgICAgICAgICAgICAgICBjb25zdCBnb29kc0RvY3VtZW50cyA9IHRoaXMuZmFjaGVmb3JtLmdvb2RzRG9jdW1lbnRzOwogICAgICAgICAgICAgICAgdGhpcy56aGZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICBpZiAoZ29vZHNEb2N1bWVudHMgIT0gdW5kZWZpbmVkICYmIGdvb2RzRG9jdW1lbnRzICE9IG51bGwgJiYgZ29vZHNEb2N1bWVudHMgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgZ29vZHNEb2N1bWVudHNBcnIgPSBnb29kc0RvY3VtZW50cy5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdvb2RzRG9jdW1lbnRzQXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZURhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBnb29kc0RvY3VtZW50c0FycltpXSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogZ29vZHNEb2N1bWVudHNBcnJbaV0sCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuemhmaWxlTGlzdC5wdXNoKGZpbGVEYXRhKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL+WFtuS7luWNleaNrgogICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJEb2N1bWVudHMgPSB0aGlzLmZhY2hlZm9ybS5vdGhlckRvY3VtZW50czsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChvdGhlckRvY3VtZW50cyAhPSB1bmRlZmluZWQgJiYgb3RoZXJEb2N1bWVudHMgIT0gbnVsbCAmJiBvdGhlckRvY3VtZW50cyAhPSAiIikgewogICAgICAgICAgICAgICAgICBjb25zdCBvdGhlckRvY3VtZW50c0FyciA9IG90aGVyRG9jdW1lbnRzLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJEb2N1bWVudHNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG90aGVyRG9jdW1lbnRzQXJyW2ldLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBvdGhlckRvY3VtZW50c0FycltpXSwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKGZpbGVEYXRhKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gYWxlcnQoMSk7CiAgICAgICAgICAgICAgICB0aGlzLnFpYW5zaG91Zm9ybSA9IHJlc3BvbnNlLmRhdGE7CgoKICAgICAgICAgICAgICAgIC8v562+5pS2MTExCgoKCiAgICAgICAgICAgICAgICAvL+ijhei0p+WbvueJhwogICAgICAgICAgICAgICAgY29uc3QgZ29vZHNEb2N1bWVudHMgPSB0aGlzLnFpYW5zaG91Zm9ybS5nb29kc0RvY3VtZW50czsKICAgICAgICAgICAgICAgIHRoaXMuemhmaWxlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgaWYgKGdvb2RzRG9jdW1lbnRzICE9IHVuZGVmaW5lZCAmJiBnb29kc0RvY3VtZW50cyAhPSBudWxsICYmIGdvb2RzRG9jdW1lbnRzICE9ICIiKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGdvb2RzRG9jdW1lbnRzQXJyID0gZ29vZHNEb2N1bWVudHMuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnb29kc0RvY3VtZW50c0Fyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVEYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogZ29vZHNEb2N1bWVudHNBcnJbaV0sCiAgICAgICAgICAgICAgICAgICAgICB1cmw6IGdvb2RzRG9jdW1lbnRzQXJyW2ldLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnpoZmlsZUxpc3QucHVzaChmaWxlRGF0YSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8v5Y246LSn5Zu+54mHCiAgICAgICAgICAgICAgICBjb25zdCB1bmxvYWREb2N1bWVudHMgPSB0aGlzLnFpYW5zaG91Zm9ybS51bmxvYWREb2N1bWVudHM7CiAgICAgICAgICAgICAgICB0aGlzLnhoZmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGlmICh1bmxvYWREb2N1bWVudHMgIT0gdW5kZWZpbmVkICYmIHVubG9hZERvY3VtZW50cyAhPSBudWxsICYmIHVubG9hZERvY3VtZW50cyAhPSAiIikgewogICAgICAgICAgICAgICAgICBjb25zdCB1bmxvYWREb2N1bWVudHNBcnIgPSB1bmxvYWREb2N1bWVudHMuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmxvYWREb2N1bWVudHNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHVubG9hZERvY3VtZW50c0FycltpXSwKICAgICAgICAgICAgICAgICAgICAgIHVybDogdW5sb2FkRG9jdW1lbnRzQXJyW2ldLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnhoZmlsZUxpc3QucHVzaChmaWxlRGF0YSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAvL+WFtuS7luWNleaNrgogICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJEb2N1bWVudHMgPSB0aGlzLnFpYW5zaG91Zm9ybS5vdGhlckRvY3VtZW50czsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChvdGhlckRvY3VtZW50cyAhPSB1bmRlZmluZWQgJiYgb3RoZXJEb2N1bWVudHMgIT0gbnVsbCAmJiBvdGhlckRvY3VtZW50cyAhPSAiIikgewogICAgICAgICAgICAgICAgICBjb25zdCBvdGhlckRvY3VtZW50c0FyciA9IG90aGVyRG9jdW1lbnRzLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJEb2N1bWVudHNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG90aGVyRG9jdW1lbnRzQXJyW2ldLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiBvdGhlckRvY3VtZW50c0FycltpXSwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKGZpbGVEYXRhKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgoKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEsdGhpcy51c2VybW9ua2V5KQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0sCiAgICAgIC8v6I635Y+W5Y+R6L2m5LiK5oql5L+h5oGvCiAgICAgIGdldGZhY2hlaW5mbyhjYXJyaWFnZUlkLCBpZCkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLmdldGJ1cyhjYXJyaWFnZUlkLCBpZCk7CiAgICAgIH0sCiAgICAgIC8v6I635Y+W55So5oi355qE5L2Z6aKdCiAgICAgIGdldHVzZXJiYWxhbmNlKCkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdXNlcmJhbGFuY2UoKS50aGVuKAogICAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy51c2VybW9ua2V5ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0sCiAgICAgIC8qKiDojrflj5bov5DljZXmlbDmja7liJfooaggK+WIhumhtSvmnaHku7bmn6Xor6IqLwogICAgICBnZXRMaXN0KCkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgd2F5YmlsbGxpc3QodGhpcy5hZGREYXRlUmFuZ2UodGhpcy5xdWVyeVBhcmFtcykpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2Uucm93czsKICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9LAogICAgICBnb0Rpc3BhdGNoKCkgewogICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgbGV0IHJhZGlvID0gdGhpcy5yYWRpbzsKICAgICAgICBpZiAocmFkaW8gPT0gMSkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi90cmFuc3BvcnQvZGlzcGF0Y2gvaW5kZXgiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi90cmFuc3BvcnQvZGlzcGF0Y2gvaW5kZXgiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdvZGV0YWlscyhjYXJyaWFnZUlkKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi90cmFuc3BvcnQvZWRpdHdheWJpbGwiLAogICAgICAgICAgcXVlcnk6IHtjYXJyaWFnZUlkOiBjYXJyaWFnZUlkfSwKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZ29BZGQoKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi90cmFuc3BvcnQvYWRkd2F5YmlsbCIpOwogICAgICB9LAogICAgICAvL+abtOWkmuafpeivogogICAgICB0YWJzZWxlbGN0aXNTaG93KCkgewogICAgICAgIHRoaXMuc2VsZWxjdGlzU2hvdyA9ICF0aGlzLnNlbGVsY3Rpc1Nob3c7CiAgICAgIH0sCiAgICAgIGdldENhcigpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzKQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0sCiAgICAgIGdvbmdsdShjYXJyaWFnZUlkLCBpZCkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZTEgPSB0cnVlOwogICAgICAgIHRoaXMuZ2V0YnVzKGNhcnJpYWdlSWQsIGlkKTsKICAgICAgfSwKICAgICAgc2h1aWx1KCkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZTIgPSB0cnVlOwogICAgICB9LAogICAgICBzZWxlY3RmdWt1YW4oKSB7CiAgICAgICAgdGhpcy5zZWxlY3RkaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSwKICAgICAgLy8gLy/ojrflj5booajmoLzkuK3lpJrpgInmoYbnmoTlgLwKICAgICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewoKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWwpOwogICAgICAgIC8vIHRoaXMuZnVrdWFuYXJyID0gdmFsOwogICAgICAgIHRoaXMuaWRzID0gdmFsLm1hcChpdGVtID0+IGl0ZW0uY2FycmlhZ2VJZCkKICAgICAgICB0aGlzLnNpbmdsZSA9IHZhbC5sZW5ndGggIT09IDEKICAgICAgICB0aGlzLm11bHRpcGxlID0gIXZhbC5sZW5ndGgKICAgICAgfSwKICAgICAgLy/nlLPor7fku5jmrL7mjInpkq4KICAgICAgZnVrdWFuMSgpIHsKICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmlkczsKCiAgICAgICAgaWYgKGlkcyA9PSB1bmRlZmluZWQgfHwgaWRzID09IG51bGwgfHwgaWRzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCLor7fpgInmi6nov5DljZUiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGdldGZ1a3VhbihpZHMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCgogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgdGhpcy5Ud29WaXNpYmxlID0gdHJ1ZTsKCiAgICAgICAgICAgIHRoaXMuc2hlbmdxaW5nZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIHRoaXMuc2hlbmdxaW5nZm9ybS5zZXJ2aWNlQ2hhcmdlID0gMDsKCiAgICAgICAgICAgIHRoaXMuc2hlbmdxaW5nZm9ybS5pc1JlYmF0ZSA9IGZhbHNlOwogICAgICAgICAgICBpZiAodGhpcy5zaGVuZ3Fpbmdmb3JtLmJpbGxUeXBlID09PSAzKSB7CiAgICAgICAgICAgICAgdGhpcy5pc0JhdGNoID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBhbGVydCh0aGlzLnNoZW5ncWluZ2Zvcm0uYmlsbFR5cGUpCiAgICAgICAgICAgIC8vIHRoaXMuc2hlbmdxaW5nZm9ybS5iaWxsVHlwZQogICAgICAgICAgICAvLyAx77ya5Y2V56Wo5Y+45py65pS25qy+CiAgICAgICAgICAgIC8vIDLvvJrljZXnpajlj7jmnLrjgIHnrKzkuozkurog5pS25qy+CiAgICAgICAgICAgIC8vIDPvvJrmibnph4/mlLbmrL4KCgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdGhpcy5tc2dFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKGVyci5tc2cpOwoKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZnVrdWFuMigpIHsKICAgICAgICB0aGlzLmZ1a3VhbmRpYWxvZ1Zpc2libGUyID0gdHJ1ZTsKICAgICAgfSwKICAgICAgLyoq5pCc57Si5p+l6K+i5oyJ6ZKu5pON5L2cICovCiAgICAgIGhhbmRsZVF1ZXJ5KCkgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgIH0sCiAgICAgIC8qKiDmuIXnqbrmjInpkq7mk43kvZwgKi8KICAgICAgcmVzZXRRdWVyeSgpIHsKICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gewogICAgICAgICAgcGFnZU51bTogMSwKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICAgIHN0YXJ0VGltZTogdW5kZWZpbmVkLCAvL+W8gOWni+aXtumXtAogICAgICAgICAgZW5kVGltZTogdW5kZWZpbmVkLCAvL+e7k+adn+aXtumXtAogICAgICAgICAgY2FycmlhZ2VTdGF0ZTogdW5kZWZpbmVkLC8v6L+Q5Y2V54q25oCBCiAgICAgICAgICBvZnRlblBhdGhOYW1lOiB1bmRlZmluZWQsIC8v5Yib5bu657q/6Lev5ZCN56ewCiAgICAgICAgICBnb29kc05hbWU6IHVuZGVmaW5lZCwgLy/otKfnianlkI3np7AKICAgICAgICAgIGRlbGl2ZXJDb250YWN0c1Byb3ZpbmNlOiB1bmRlZmluZWQsIC8v6KOF6LSn5Zyw54K5CiAgICAgICAgICB0YWtlQ29udGFjdHNQcm92aW5jZTogdW5kZWZpbmVkLCAvL+WNuOi0p+WcsOeCuQogICAgICAgICAgZGVsaXZlckNvbnRhY3RzOiB1bmRlZmluZWQsIC8v5Y+R6LSn6IGU57O75Lq6CiAgICAgICAgICBjYXJyaWFnZUlkOiB1bmRlZmluZWQsIC8v6L+Q5Y2V5Y+3CiAgICAgICAgICByZWxldmFuY2VDb2RlOiB1bmRlZmluZWQsIC8v5a6i5oi35Y2V5Y+3L+iuouWNleWPtwogICAgICAgICAgdmVoaWNsZU51bWJlcjogdW5kZWZpbmVkLC8v6L2m6Ii55Y+3CiAgICAgICAgICBjaGVja1N0YXRlOiB1bmRlZmluZWQsLy/lrqHmoLjnirbmgIEKICAgICAgICAgIHBheVN0YXRlOiB1bmRlZmluZWQsLy/mlK/ku5jnirbmgIEKICAgICAgICAgIGlmSW52b2ljZTogdW5kZWZpbmVkLC8v5byA56Wo54q25oCBCiAgICAgICAgICBwYXllZU5hbWU6IHVuZGVmaW5lZCwvL+WPuOacuuWnk+WQjQogICAgICAgIH0sCiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgICB9LAogICAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovCiAgICAgIGhhbmRsZUV4cG9ydCgpIHsKICAgICAgICB0aGlzLmRvd25sb2FkKCcvd2F5YmlsbC9DYXJyaWFnZUluZm8vZXhwb3J0Q2FycmlhZ2VJbmZvJywgewogICAgICAgICAgLi4udGhpcy5xdWVyeVBhcmFtcwogICAgICAgIH0sIGB3YXliaWxsXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9Lnhsc3hgKQogICAgICB9LAogICAgICBjaGVja2VkeWVtaWFuKCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmFkaW8pOwogICAgICAgIC8vIGlmICh0aGlzLnJhZGlvID09IDEpIHsKICAgICAgICAvLyAgIHRoaXMuZnVrdWFuZGlhbG9nVmlzaWJsZTEgPSB0cnVlOwogICAgICAgIC8vICAgdGhpcy5zZWxlY3RkaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLnJhZGlvID09IDIpIHsKICAgICAgICAvLyAgIHRoaXMuZnVrdWFuZGlhbG9nVmlzaWJsZTIgPSB0cnVlOwogICAgICAgIC8vICAgdGhpcy5zZWxlY3RkaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLnJhZGlvID09IDMpIHsKICAgICAgICAvLyAgIHRoaXMuZnVrdWFuZGlhbG9nVmlzaWJsZTMgPSB0cnVlOwogICAgICAgIC8vICAgdGhpcy5zZWxlY3RkaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAvLyAgIHRoaXMuZnVrdWFuZGlhbG9nVmlzaWJsZTQgPSB0cnVlOwogICAgICAgIC8vICAgdGhpcy5zZWxlY3RkaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8gfQogICAgICB9LAogICAgICAvL+WkjeWItui/kOWNleWPtwogICAgICBjb3B5d2FpbGwodGV4dCwgZXZlbnQpIHsKICAgICAgICBjb3B5VGV4dCh0ZXh0LCBldmVudCkKICAgICAgfSwKICAgICAgLy/moLnmja5pZOWIoOmZpOi/kOWNlQogICAgICBkZWxldGVCeUlkKGNhcnJpYWdlSWQpIHsKICAgICAgICBkZWx5dW5kYW4oY2FycmlhZ2VJZCkudGhlbigKICAgICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCLliKDpmaTlpLHotKUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0sCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAvKioKICAgICAgICog5Y+R6L2m5LiK5oqlCiAgICAgICAqLwogICAgICBzZW5kQ2FyUmVwb3J0ZWQoKSB7CiAgICAgICAgLy/oo4XotKflm77niYcKICAgICAgICBsZXQgZ29vZHNEb2N1bWVudHMgPSBbXTsKICAgICAgICBpZiAodGhpcy56aGZpbGVMaXN0ICE9IG51bGwgJiYgdGhpcy56aGZpbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy56aGZpbGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGdvb2RzRG9jdW1lbnRzLnB1c2godGhpcy56aGZpbGVMaXN0W2ldLnVybCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tc2dJbmZvKCLor7fpgInmi6nkuIrkvKDoo4XotKflm77niYciKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgoKICAgICAgICAvL+WFtuS7luWbvueJhwogICAgICAgIGxldCBvdGhlckRvY3VtZW50cyA9IFtdOwogICAgICAgIGlmICh0aGlzLmZpbGVMaXN0ICE9IG51bGwgJiYgdGhpcy5maWxlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmlsZUxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgb3RoZXJEb2N1bWVudHMucHVzaCh0aGlzLmZpbGVMaXN0W2ldLnVybCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tc2dJbmZvKCLor7fpgInmi6nkuIrkvKDlhbblroPljZXmja4iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgoKICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgY2FycmlhZ2VJZDogdGhpcy5mYWNoZWZvcm0uY2FycmlhZ2VJZCwKICAgICAgICAgIHJlYWxpdHlJbnN0YWxsTnVtYmVyOiB0aGlzLmZhY2hlZm9ybS5yZWFsaXR5SW5zdGFsbE51bWJlciwKICAgICAgICAgIHJlYWxpdHlJbnN0YWxsTnVtYmVyVW5pdDogdGhpcy5mYWNoZWZvcm0ucmVhbGl0eUluc3RhbGxOdW1iZXJVbml0LAogICAgICAgICAgc2V0dGxlQWNjb3VudHM6IHRoaXMuZmFjaGVmb3JtLnNldHRsZUFjY291bnRzLAogICAgICAgICAgYXJyaXZlVGltZTogdGhpcy5mYWNoZWZvcm0uYXJyaXZlVGltZSwKICAgICAgICAgIGdvb2RzRG9jdW1lbnRzOiBnb29kc0RvY3VtZW50cy50b1N0cmluZygpLAogICAgICAgICAgb3RoZXJEb2N1bWVudHM6IG90aGVyRG9jdW1lbnRzLnRvU3RyaW5nKCksCiAgICAgICAgfTsKICAgICAgICAvL+WPkei9puS4iuaKpQogICAgICAgIHRvU2VuZENhclJlcG9ydGVkKGRhdGEpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlj5HovabkuIrmiqXmj5DkuqQiKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmm7TmlrDmiJDlip8iKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCfmm7TmlrDlpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCgoKICAgICAgLyoqCiAgICAgICAqIHNpZ25XYXliaWxsSW5mbwogICAgICAgKiDnrb7mlLYKICAgICAgICovCgogICAgICBzaWduV2F5YmlsbEluZm8oKSB7CiAgICAgICAgLy/oo4XotKflm77niYcKICAgICAgICBsZXQgZ29vZHNEb2N1bWVudHMgPSBbXTsKICAgICAgICBpZiAodGhpcy56aGZpbGVMaXN0ICE9IG51bGwgJiYgdGhpcy56aGZpbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy56aGZpbGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGdvb2RzRG9jdW1lbnRzLnB1c2godGhpcy56aGZpbGVMaXN0W2ldLnVybCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tc2dJbmZvKCLor7fpgInmi6nkuIrkvKDoo4XotKflm77niYciKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy/ljbjotKflm77niYcKICAgICAgICBsZXQgdW5sb2FkRG9jdW1lbnRzID0gW107CiAgICAgICAgaWYgKHRoaXMueGhmaWxlTGlzdCAhPSBudWxsICYmIHRoaXMueGhmaWxlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMueGhmaWxlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB1bmxvYWREb2N1bWVudHMucHVzaCh0aGlzLnhoZmlsZUxpc3RbaV0udXJsKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0luZm8oIuivt+mAieaLqeS4iuS8oOWNuOi0p+WbvueJhyIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCgogICAgICAgIC8v5YW25LuW5Zu+54mHCiAgICAgICAgbGV0IG90aGVyRG9jdW1lbnRzID0gW107CiAgICAgICAgaWYgKHRoaXMuZmlsZUxpc3QgIT0gbnVsbCAmJiB0aGlzLmZpbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvdGhlckRvY3VtZW50cy5wdXNoKHRoaXMuZmlsZUxpc3RbaV0udXJsKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0luZm8oIuivt+mAieaLqeS4iuS8oOWFtuWug+WNleaNriIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCgogICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICBjYXJyaWFnZUlkOiB0aGlzLnFpYW5zaG91Zm9ybS5jYXJyaWFnZUlkLAogICAgICAgICAgcmVhbGl0eUluc3RhbGxOdW1iZXI6IHRoaXMucWlhbnNob3Vmb3JtLnJlYWxpdHlJbnN0YWxsTnVtYmVyLAogICAgICAgICAgcmVhbGl0eUluc3RhbGxOdW1iZXJVbml0OiB0aGlzLnFpYW5zaG91Zm9ybS5yZWFsaXR5SW5zdGFsbE51bWJlclVuaXQsCiAgICAgICAgICBkZW1vdW50VGltZTogdGhpcy5xaWFuc2hvdWZvcm0uZGVtb3VudFRpbWUsCiAgICAgICAgICB1bml0UHJpY2U6IHRoaXMucWlhbnNob3Vmb3JtLnVuaXRQcmljZSwKCiAgICAgICAgICB1bml0UHJpY2VVbml0OiB0aGlzLnFpYW5zaG91Zm9ybS51bml0UHJpY2VVbml0LAogICAgICAgICAgc2V0dGxlV2VpZ2h0OiB0aGlzLnFpYW5zaG91Zm9ybS5zZXR0bGVXZWlnaHQsCiAgICAgICAgICByYXRpb25hbExvc3NXZWlnaHQ6IHRoaXMucWlhbnNob3Vmb3JtLnJhdGlvbmFsTG9zc1dlaWdodCwKICAgICAgICAgIHJhdGlvbmFsTG9zc1dlaWdodFVuaXQ6IHRoaXMucWlhbnNob3Vmb3JtLnJhdGlvbmFsTG9zc1dlaWdodFVuaXQsCiAgICAgICAgICBsb3NzV2VpZ2h0TnVtYmVyOiB0aGlzLnFpYW5zaG91Zm9ybS5sb3NzV2VpZ2h0TnVtYmVyLAogICAgICAgICAgc2V0dGxlQWNjb3VudHM6IHRoaXMucWlhbnNob3Vmb3JtLnNldHRsZUFjY291bnRzLAogICAgICAgICAgc2lnblVzZXI6IHRoaXMucWlhbnNob3Vmb3JtLnNpZ25Vc2VyLAogICAgICAgICAgc2lnblJlbWFyazogdGhpcy5xaWFuc2hvdWZvcm0uc2lnblJlbWFyaywKCiAgICAgICAgICB1bmxvYWREb2N1bWVudHM6IHVubG9hZERvY3VtZW50cy50b1N0cmluZygpLAogICAgICAgICAgZ29vZHNEb2N1bWVudHM6IGdvb2RzRG9jdW1lbnRzLnRvU3RyaW5nKCksCiAgICAgICAgICBvdGhlckRvY3VtZW50czogb3RoZXJEb2N1bWVudHMudG9TdHJpbmcoKSwKICAgICAgICB9OwoKCgoKICAgICAgICAvL+etvuaUtgogICAgICAgIHRvdW5sb2FkKGRhdGEpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnrb7mlLbmj5DkuqQiKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuabtOaWsOaIkOWKnyIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IoJ+abtOaWsOWksei0pScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t6KOF6LSn5Zu+54mHLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgIHpoaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKCiAgICAgICAgY29uc3QgZmlsZXMgPSBmaWxlLnJhdzsKCgogICAgICAgIGNvbnN0IHR5cGVBcnIgPSBbJ2ltYWdlL3BuZycsICdpbWFnZS9naWYnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnXTsKICAgICAgICBjb25zdCBpc0pQRyA9IHR5cGVBcnIuaW5kZXhPZihmaWxlcy50eXBlKSAhPT0gLTE7CiAgICAgICAgY29uc3QgaXNMdDJNID0gZmlsZXMuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKICAgICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCfkuIrkvKDlm77niYflj6rog73mmK8gcG5nIOOAgWpwZWcg44CBanBnICDmoLzlvI8hJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCfkuIrkvKDlm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLnpoZmlsZUxpc3QubGVuZ3RoOwoKICAgICAgICBpZiAobGVuZ3RoIDwgMykgewogICAgICAgICAgdGhpcy4kcmVmcy56aHVwbG9hZC5zdWJtaXQoKTsKCiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPT0gMykgewogICAgICAgICAgY29uc3QgZmlsZURhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6IGZpbGVzLnVpZCwKICAgICAgICAgICAgdXJsOiBmaWxlcy51aWQsCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnpoZmlsZUxpc3QucHVzaChmaWxlRGF0YSk7CgogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuemhmaWxlTGlzdCwgdGhpcy56aGZpbGVMaXN0Lmxlbmd0aCAtIDEpOwoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tc2dJbmZvKCLmnIDlpJrkuIrkvKDkuInlvKDlm77niYciKTsKICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnpoZmlsZUxpc3QsIHRoaXMuemhmaWxlTGlzdC5sZW5ndGggLSAxKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgfQoKCiAgICAgIH0sCiAgICAgIHpoaGFuZGxlUmVtb3ZlKGZpbGUpIHsKICAgICAgICBjb25zdCB1cmwgPSBmaWxlLnVybDsKICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnpoZmlsZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS51cmwgPT09IHVybCk7CiAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuemhmaWxlTGlzdCwgaW5kZXgpOwogICAgICB9LAoKICAgICAgemhoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICAgIHRoaXMuemhkaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICAgIHRoaXMuemhkaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSwKICAgICAgemhoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgICBjb25zdCBmaWxlRGF0YSA9IHsKICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLAogICAgICAgICAgdXJsOiByZXMuZGF0YSwKICAgICAgICB9CiAgICAgICAgdGhpcy56aGZpbGVMaXN0LnB1c2goZmlsZURhdGEpOwoKICAgICAgfSwKCgogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3ljbjotKflm77niYctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgeGhoYW5kbGVCZWZvcmVVcGxvYWQoZmlsZSkgewoKICAgICAgICBjb25zdCBmaWxlcyA9IGZpbGUucmF3OwoKCiAgICAgICAgY29uc3QgdHlwZUFyciA9IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2dpZicsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZyddOwogICAgICAgIGNvbnN0IGlzSlBHID0gdHlwZUFyci5pbmRleE9mKGZpbGVzLnR5cGUpICE9PSAtMTsKICAgICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlcy5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwogICAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICAgIHRoaXMubXNnRXJyb3IoJ+S4iuS8oOWbvueJh+WPquiDveaYryBwbmcg44CBanBlZyDjgIFqcGcgIOagvOW8jyEnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICAgIHRoaXMubXNnRXJyb3IoJ+S4iuS8oOWbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMueGhmaWxlTGlzdC5sZW5ndGg7CgogICAgICAgIGlmIChsZW5ndGggPCAzKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnhodXBsb2FkLnN1Ym1pdCgpOwoKICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PSAzKSB7CiAgICAgICAgICBjb25zdCBmaWxlRGF0YSA9IHsKICAgICAgICAgICAgbmFtZTogZmlsZXMudWlkLAogICAgICAgICAgICB1cmw6IGZpbGVzLnVpZCwKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMueGhmaWxlTGlzdC5wdXNoKGZpbGVEYXRhKTsKCiAgICAgICAgICB0aGlzLiRkZWxldGUodGhpcy54aGZpbGVMaXN0LCB0aGlzLnhoZmlsZUxpc3QubGVuZ3RoIC0gMSk7CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0luZm8oIuacgOWkmuS4iuS8oOS4ieW8oOWbvueJhyIpOwogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMueGhmaWxlTGlzdCwgdGhpcy54aGZpbGVMaXN0Lmxlbmd0aCAtIDEpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICB9CgoKICAgICAgfSwKICAgICAgeGhoYW5kbGVSZW1vdmUoZmlsZSkgewogICAgICAgIGNvbnN0IHVybCA9IGZpbGUudXJsOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMueGhmaWxlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnVybCA9PT0gdXJsKTsKICAgICAgICB0aGlzLiRkZWxldGUodGhpcy54aGZpbGVMaXN0LCBpbmRleCk7CiAgICAgIH0sCgogICAgICB4aGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgICAgdGhpcy54aGRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgICAgdGhpcy54aGRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB9LAogICAgICB4aGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQogICAgICAgIGNvbnN0IGZpbGVEYXRhID0gewogICAgICAgICAgbmFtZTogcmVzLmRhdGEsCiAgICAgICAgICB1cmw6IHJlcy5kYXRhLAogICAgICAgIH0KICAgICAgICB0aGlzLnhoZmlsZUxpc3QucHVzaChmaWxlRGF0YSk7CgogICAgICB9LAoKCgogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3lhbbku5bljZXmja4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKCiAgICAgICAgY29uc3QgZmlsZXMgPSBmaWxlLnJhdzsKICAgICAgICBjb25zdCB0eXBlQXJyID0gWydpbWFnZS9wbmcnLCAnaW1hZ2UvZ2lmJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvanBnJ107CiAgICAgICAgY29uc3QgaXNKUEcgPSB0eXBlQXJyLmluZGV4T2YoZmlsZXMudHlwZSkgIT09IC0xOwogICAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGVzLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CiAgICAgICAgaWYgKCFpc0pQRykgewogICAgICAgICAgdGhpcy5tc2dFcnJvcign5LiK5Lyg5Zu+54mH5Y+q6IO95pivIHBuZyDjgIFqcGVnIOOAgWpwZyAg5qC85byPIScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgICAgdGhpcy5tc2dFcnJvcign5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5maWxlTGlzdC5sZW5ndGg7CgogICAgICAgIGlmIChsZW5ndGggPCAzKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsKCiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPT0gMykgewogICAgICAgICAgY29uc3QgZmlsZURhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6IGZpbGVzLnVpZCwKICAgICAgICAgICAgdXJsOiBmaWxlcy51aWQsCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goZmlsZURhdGEpOwogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuZmlsZUxpc3QsIHRoaXMuZmlsZUxpc3QubGVuZ3RoIC0gMSk7CgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0luZm8oIuacgOWkmuS4iuS8oOS4ieW8oOWbvueJhyIpOwogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMuZmlsZUxpc3QsIHRoaXMuZmlsZUxpc3QubGVuZ3RoIC0gMSk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIH0KCgogICAgICB9LAogICAgICBoYW5kbGVSZW1vdmUoZmlsZSkgewogICAgICAgIGNvbnN0IHVybCA9IGZpbGUudXJsOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMuZmlsZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS51cmwgPT09IHVybCk7CiAgICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLmZpbGVMaXN0LCBpbmRleCk7CiAgICAgIH0sCgogICAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgICB0aGlzLm90ZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0sCiAgICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQogICAgICAgIGNvbnN0IGZpbGVEYXRhID0gewogICAgICAgICAgbmFtZTogcmVzLmRhdGEsCiAgICAgICAgICB1cmw6IHJlcy5kYXRhLAogICAgICAgIH0KICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goZmlsZURhdGEpOwoKICAgICAgfSwKCgogICAgfSwKICB9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA","file":"index.vue","sourceRoot":"src/views/waybillmangment","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\">\n      <el-row>\n        <div class=\"mb20 flex justify-end\">\n          <el-col :span=\"12\">\n            <el-form-item label=\"创建时间\">\n              <el-date-picker\n                clearable\n                type=\"datetime\"\n                placeholder=\"开始日期\"\n                :picker-options=\"pickerOptionsStart\"\n                v-model=\"queryParams.startTime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                class=\"box-date-picker\"\n              ></el-date-picker>\n              -\n              <el-date-picker\n                clearable\n                type=\"datetime\"\n                placeholder=\"结束日期\"\n                :picker-options=\"pickerOptionsEnd\"\n                v-model=\"queryParams.endTime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                class=\"box-date-picker\"\n              ></el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"运单状态\">\n              <el-select\n                clearable\n                v-model=\"queryParams.carriageState\"\n                placeholder=\"运单状态\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in yundanoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"装货地点\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.deliverContactsProvince\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"装货地点\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-button size=\"small\" type=\"primary\" @click=\"handleQuery()\" plain>查询</el-button>\n            <el-button size=\"small\" type=\"primary\" @click=\"resetQuery\" plain>清空</el-button>\n          </el-col\n          >\n        </div>\n      </el-row>\n\n      <el-row>\n        <div class=\"mb20 flex justify-end\">\n          <el-col :span=\"6\">\n            <el-form-item label=\"发货联系人\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.deliverContacts\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"发货联系人\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"运单号\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.carriageId\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"运单号\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n\n\n          <el-col :span=\"8\">\n            <el-form-item label=\"卸货地点\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.takeContactsProvince\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"卸货地点\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </div\n        >\n      </el-row>\n\n      <el-row>\n        <div class=\"mb20 flex justify-end\">\n\n          <el-col :span=\"6\">\n            <el-form-item label=\"客户单号/订单号\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.relevanceCode\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"客户单号/订单号\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"车船号\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.vehicleNumber\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"车船号\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\" v-if=\"selelctisShow == true\">\n            <el-link type=\"primary\" @click=\"tabselelctisShow\"\n            >更多查询\n            </el-link\n            >\n          </el-col\n          >\n          <el-col :span=\"8\" v-else></el-col>\n        </div\n        >\n      </el-row>\n\n\n      <el-row v-if=\"selelctisShow == false\">\n        <div class=\"mb20 flex justify-end\">\n          <!--  <el-col :span=\"6\">\n              <el-form-item label=\"订单号\">\n                  <el-input\n                  clearable\n                    size=\"small mr10\"\n                    v-model=\"queryParams.deliverContactsProvince\"\n                    @keyup.enter.native=\"handleQuery\"\n                    value=\"\"\n                    placeholder=\"订单号\"\n                  >\n                  </el-input>\n                      </el-form-item></el-col> -->\n          <el-col :span=\"6\"\n          >\n            <el-form-item label=\"审核状态\">\n              <el-select\n                clearable\n                v-model=\"queryParams.checkState\"\n                placeholder=\"审核状态\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in  checkoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"支付状态\">\n              <el-select\n                clearable\n                v-model=\"queryParams.payState\"\n                placeholder=\"支付状态\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in payoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </div\n        >\n      </el-row>\n\n      <el-row v-if=\"selelctisShow == false\">\n        <div class=\"mb20 flex justify-end\">\n          <el-col :span=\"5\">\n            <el-form-item label=\"开票状态\">\n              <el-select\n                clearable\n                v-model=\"queryParams.ifInvoice\"\n                placeholder=\"开票状态\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in ifoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"司机姓名\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.payeeName\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"司机姓名\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n          <!-- <el-col :span=\"5\">\n             <el-form-item label=\"船舶类型\">\n                 <el-select\n                     clearable\n                       v-model=\"queryParams.oftenPathState\"\n                       placeholder=\"船舶类型\"\n                       size=\"small\"\n                     >\n                       <el-option\n                         v-for=\"item in zhuangtaioptions\"\n                         :key=\"item.value\"\n                         :label=\"item.label\"\n                         :value=\"item.value\"\n                       >\n                       </el-option>\n                     </el-select>\n                     </el-form-item>\n           </el-col>-->\n          <el-col :span=\"3\"\n          >\n            <el-link type=\"primary\" @click=\"tabselelctisShow\"\n            >更多查询\n            </el-link\n            >\n          </el-col\n          >\n        </div\n        >\n      </el-row>\n    </el-form>\n\n\n    <div class=\"mb20\">\n      <el-button size=\"small\" type=\"primary\" @click=\"goAdd\" plain\n      >新建运单\n      </el-button\n      >\n\n      <!--<el-button size=\"small\" type=\"danger\" @click=\"deleteById()\" plain>作废</el-button> -->\n      <el-button size=\"small\" type=\"warning\" plain @click=\"fukuan1()\"\n                 :disabled=\"multiple\"\n\n                 v-hasPermi=\"['finance:carriage:getPaymentBillInfo']\">申请付款\n      </el-button\n      >\n\n      <FileUpload style=\"display: inline-block;margin-left: 10px;\" :url=\"importDriverUrl\" :text=\"text\"\n                  :isShowTip=\"false\"></FileUpload>\n\n      <!--<el-button size=\"small\" type=\"warning\" plain>批量操作</el-button> -->\n      <!--<el-button size=\"small\" type=\"primary\" plain   @click=\"handleImport\"  v-hasPermi=\"['waybill:carriagePath:importOftenPath']\">导入</el-button>-->\n      <el-button size=\"small\" type=\"primary\" @click=\"handleExport\"\n                 v-hasPermi=\"['waybill:CarriageInfo:exportCarriageInfo']\" plain>导出\n      </el-button>\n    </div>\n\n    <div style=\"color: red; margin-bottom: 10px\">可用余额:{{usermonkey}}元</div>\n    <el-table\n      :data=\"tableData\"\n      style=\"width: 100%\"\n      :header-cell-style=\"{ background: '#409EFF', color: '#ffffff' }\"\n      @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\"></el-table-column>\n      <el-table-column type=\"index\" label=\"序号\"></el-table-column>\n      <el-table-column prop=\"carriageId\" label=\"运单号\" width=\"300px\">\n        <template slot-scope=\"scope\">\n            <span class=\"operate mr10\" @click=\"godetails(scope.row.carriageId)\"\n            >{{scope.row.carriageId}}</span\n            ></template>\n      </el-table-column>\n\n      <el-table-column prop=\"ifInvoice\" :formatter=\"yunstateFormat\" label=\"是否开票\">\n\n      </el-table-column>\n      <el-table-column prop=\"transportType\" :formatter=\"yunstateFormat2\" label=\"运输方式\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"调车方式\"></el-table-column> -->\n      <el-table-column prop=\"carriageState\" :formatter=\"yunstateFormat5\" label=\"运单状态\"></el-table-column>\n      <el-table-column\n        :formatter=\"yunstateFormat3\"\n        prop=\"checkState\"\n        label=\"审核状态\"\n        width=\"120\"\n      ></el-table-column>\n      <el-table-column prop=\"paymentState\" :formatter=\"yunstateFormat4\" label=\"付款申请状态\" width=\"140px\"></el-table-column>\n      <el-table-column prop=\"shipperUserId\" label=\"托运人\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"订单号\"></el-table-column> -->\n      <el-table-column prop=\"relevanceCode\" label=\"关联单号\"></el-table-column>\n      <el-table-column\n        prop=\"goodsName\"\n        label=\"货物名称\"\n        width=\"120\"\n      ></el-table-column>\n      <el-table-column prop=\"deliverContactsProvince\" width=\"400px\" label=\"装货地点\"></el-table-column>\n      <el-table-column prop=\"takeContactsProvince\" width=\"400px\" label=\"卸货地点\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"承运人\"></el-table-column> -->\n      <el-table-column prop=\"payeeName\" label=\"司机\"></el-table-column>\n      <el-table-column prop=\"vehicleNumber\" label=\"车船号\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"trucksType\" label=\"船舶类型\"></el-table-column>\n      <el-table-column prop=\"planPickTime\" label=\"计划装货时间\" width=\"400px\"></el-table-column>\n      <el-table-column prop=\"demountTime\" label=\"实际提货时间\" width=\"400px\"></el-table-column>\n      <el-table-column prop=\"planArrivalTime\" label=\"实际到货时间\" width=\"400px\"></el-table-column>\n      <el-table-column prop=\"unitPriceUnit\" label=\"计价单位\"></el-table-column>\n      <el-table-column prop=\"stowageAmount\" label=\"计划装货量\" width=\"120px\"></el-table-column>\n      <el-table-column prop=\"realityInstallNumber\" label=\"实发装货量\" width=\"120px\"></el-table-column>\n      <el-table-column prop=\"realityArriveNumber\" label=\"实收量\"></el-table-column>\n      <el-table-column prop=\"unitPrice\" label=\"单价\"></el-table-column>\n      <el-table-column prop=\"sjPaymentAmount\" label=\"司机运费\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"含税运费\"></el-table-column> -->\n      <el-table-column prop=\"alreadyPaidYf\" label=\"已支付运费\" width=\"120px\"></el-table-column>\n      <el-table-column prop=\"payState\" label=\"支付状态\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"开票状态\"></el-table-column> -->\n      <el-table-column prop=\"answerStatus\" label=\"回单状态\"></el-table-column>\n      <el-table-column prop=\"remake\" label=\"备注说明\"></el-table-column>\n      <el-table-column prop=\"createBy\" label=\"创建人\"></el-table-column>\n      <el-table-column prop=\"createTime\" width=\"200px\" label=\"创建时间\"></el-table-column>\n      <el-table-column prop=\"date\" label=\"操作\" fixed=\"right\" width=\"200px\">\n        <template slot-scope=\"scope\">\n          <span class=\"operate mr10\" ref=\"code\" v-hasPermi=\"['waybill:CarriageInfo:deleteCarriageInfo']\"\n                @click=\"deleteById(scope.row.carriageId)\">作废</span>\n<!--          <span class=\"operate mr10\" ref=\"code\" @click=\"copywaill(scope.row.carriageId,$event)\">复制运单</span>-->\n          <span class=\"operate mr10\" @click=\"getfacheinfo(scope.row.carriageId,1)\">发车</span>\n          <span class=\"operate\" @click=\"gonglu(scope.row.carriageId,2)\">签收</span>\n          <!-- <el-popconfirm\n           title=\"选择付款方式\"\n           confirm-button-text=\"公路运输\"\n           cancel-button-text=\"水路运输\"\n           @cancel=\"shuilu\"\n           @confirm=\"gonglu\"\n         >\n           <span class=\"operate\" slot=\"reference\">签收</span>\n         </el-popconfirm>-->\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total > 0\"\n      :page-sizes=\"[10, 20, 30, 50, 100]\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n\n    <!--  发车-->\n    <el-dialog\n      title=\"发车上报\"\n      :visible.sync=\"dialogVisible\"\n      width=\"50%\"\n      center>\n      <el-form ref=\"facheform\" :model=\"facheform\" :rules=\"rules\" label-width=\"150px\">\n        <p>非司机操作，系统将启动对运单的审核流程，请确认后谨慎操作</p>\n        <el-card class=\"box-card mb20\">\n          <div slot=\"header\" class=\"clearfix\">\n            <h2>{{facheform.payeeName}} {{facheform.vehicleTypeCode}}</h2>\n            <!--          <el-button style=\"float: right; padding: 3px 0\" type=\"text\">操作按钮</el-button>-->\n          </div>\n          <div class=\"flex justify-around align-center\">\n            <div class=\"text-center\">\n              <h2>{{facheform.deliverContactsProvince}}</h2>\n              <p>装货点</p>\n            </div>\n            <div class=\"text-center\">\n              <!-- <el-image></el-image> -->\n              <svg t=\"1622079118311\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\"\n                   xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3756\" width=\"400\" height=\"50\">\n                <path\n                  d=\"M837.9904 570.0608H124.5696a29.0304 29.0304 0 0 1-29.0304-29.0304V482.9696a29.0304 29.0304 0 0 1 29.0304-29.0304h713.4208z\"\n                  fill=\"#2C2C2C\" p-id=\"3757\"></path>\n                <path\n                  d=\"M561.3056 808.96l-40.96-40.96a28.928 28.928 0 0 1 0-40.96l215.04-215.04-215.04-215.04a28.9792 28.9792 0 0 1 0-40.96l40.96-40.96a28.9792 28.9792 0 0 1 40.96 0l296.96 296.96-296.96 296.96a28.9792 28.9792 0 0 1-40.96 0z\"\n                  fill=\"#2C2C2C\" p-id=\"3758\"></path>\n              </svg>\n              <p>{{facheform.unitPrice}}/{{facheform.unitPriceUnit}}</p>\n            </div>\n            <div class=\"text-center\">\n              <h2>{{facheform.takeContactsProvince}}</h2>\n              <p>卸货点</p>\n            </div>\n          </div>\n        </el-card>\n        <el-form-item label=\"装货数量\" prop=\"companyName\">\n          <el-input v-model=\"facheform.realityInstallNumber\"></el-input>\n\n          <el-select\n            clearable\n            v-model=\"facheform.realityInstallNumberUnit\"\n            placeholder=\"单位\"\n            size=\"small\"\n          >\n            <el-option\n              v-for=\"item in facheoptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"运费\" prop=\"settleAccounts\">\n          <el-input v-model=\"facheform.settleAccounts\"></el-input>\n          元\n\n          <!--          <el-select class=\"mr10\" value=\"元\" placeholder=\"\" clearable>-->\n          <!--            <el-option value=\"1\" label=\"元\"></el-option>-->\n          <!--          </el-select>-->\n        </el-form-item>\n\n        <el-form-item label=\"装货时间\" prop=\"arriveTime\">\n          <!--          <el-input v-model=\"facheform.arriveTime\"></el-input>-->\n          <el-date-picker\n            clearable\n            type=\"datetime\"\n            placeholder=\"装货时间\"\n            :picker-options=\"pickerOptionsStart\"\n            v-model=\"facheform.arriveTime\"\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\n            class=\"box-date-picker\"\n          ></el-date-picker>\n\n\n        </el-form-item>\n\n        <div>\n          <!--          <el-form-item label=\"装货单\" prop=\"goodsDocuments\">-->\n          <!--            <ImageUpload v-model=\"facheform.goodsDocuments\"></ImageUpload>-->\n          <!--          </el-form-item>-->\n          <el-form-item label=\"装货单（最多上传三张图片）\" label-width=\"300px\" prop=\"goodsDocuments\">\n\n            <el-upload\n              ref=\"zhupload\"\n\n              :action=\"uploadImgUrl\"\n              list-type=\"picture-card\"\n              :on-preview=\"zhhandlePictureCardPreview\"\n              :on-remove=\"zhhandleRemove\"\n              :headers=\"headers\"\n              :file-list=\"zhfileList\"\n              :auto-upload=\"false\"\n              :on-change=\"zhhandleBeforeUpload\"\n              :on-success=\"zhhandleUploadSuccess\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"zhdialogVisible\">\n              <img width=\"100%\" :src=\"zhdialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n\n\n        </div>\n\n        <div>\n          <!--          <el-form-item label=\"其它单据\" prop=\"otherDocuments\">-->\n          <!--            <ImageUpload v-model=\"facheform.otherDocuments\"></ImageUpload>-->\n\n          <!--          </el-form-item>-->\n          <el-form-item label=\"其它单据（最多上传三张图片）\" label-width=\"300px\" prop=\"otherDocuments\">\n\n            <el-upload\n              ref=\"upload\"\n\n              :action=\"uploadImgUrl\"\n              list-type=\"picture-card\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-remove=\"handleRemove\"\n              :headers=\"headers\"\n              :file-list=\"fileList\"\n              :auto-upload=\"false\"\n              :on-change=\"handleBeforeUpload\"\n              :on-success=\"handleUploadSuccess\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"otdialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n\n        </div>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"sendCarReported\"   v-hasPermi=\"['waybill:CarriageInfo:depart']\"\n        >确 定</el-button\n        >\n      </span>\n    </el-dialog>\n\n    <!--  签收 公路-->\n    <el-dialog\n      title=\"签收确认\"\n      :visible.sync=\"dialogVisible1\"\n      width=\"60%\"\n      center\n    >\n      <el-form ref=\"qianshouform\" :model=\"qianshouform\" :rules=\"rules\" label-width=\"150px\">\n        <p>非司机操作，系统将启动对运单的审核流程，请确认后谨慎操作</p>\n        <el-card class=\"box-card mb20\">\n          <div slot=\"header\" class=\"clearfix\">\n            <h2>{{qianshouform.payeeName}} {{qianshouform.vehicleTypeCode}}</h2>\n            <!--          <el-button style=\"float: right; padding: 3px 0\" type=\"text\">操作按钮</el-button>-->\n          </div>\n          <div class=\"flex justify-around align-center\">\n            <div class=\"text-center\">\n              <h2>{{qianshouform.deliverContactsProvince}}</h2>\n              <p>装货点</p>\n            </div>\n            <div class=\"text-center\">\n              <!-- <el-image></el-image> -->\n              <svg t=\"1622079118311\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\"\n                   xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3756\" width=\"400\" height=\"50\">\n                <path\n                  d=\"M837.9904 570.0608H124.5696a29.0304 29.0304 0 0 1-29.0304-29.0304V482.9696a29.0304 29.0304 0 0 1 29.0304-29.0304h713.4208z\"\n                  fill=\"#2C2C2C\" p-id=\"3757\"></path>\n                <path\n                  d=\"M561.3056 808.96l-40.96-40.96a28.928 28.928 0 0 1 0-40.96l215.04-215.04-215.04-215.04a28.9792 28.9792 0 0 1 0-40.96l40.96-40.96a28.9792 28.9792 0 0 1 40.96 0l296.96 296.96-296.96 296.96a28.9792 28.9792 0 0 1-40.96 0z\"\n                  fill=\"#2C2C2C\" p-id=\"3758\"></path>\n              </svg>\n              <p>{{qianshouform.unitPrice}}/{{qianshouform.unitPriceUnit}}</p>\n            </div>\n            <div class=\"text-center\">\n              <h2>{{qianshouform.takeContactsProvince}}</h2>\n              <p>卸货点</p>\n            </div>\n          </div>\n        </el-card>\n        <el-row>\n\n          <el-form-item label=\"装货单（最多上传三张图片）\" label-width=\"300px\" prop=\"goodsDocuments\">\n\n            <el-upload\n              ref=\"zhupload\"\n\n              :action=\"uploadImgUrl\"\n              list-type=\"picture-card\"\n              :on-preview=\"zhhandlePictureCardPreview\"\n              :on-remove=\"zhhandleRemove\"\n              :headers=\"headers\"\n              :file-list=\"zhfileList\"\n              :auto-upload=\"false\"\n              :on-change=\"zhhandleBeforeUpload\"\n              :on-success=\"zhhandleUploadSuccess\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"zhdialogVisible\">\n              <img width=\"100%\" :src=\"zhdialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n\n\n          <el-form-item label=\"卸货单（最多上传三张图片）\" label-width=\"300px\" prop=\"unloadDocuments\">\n\n            <el-upload\n              ref=\"xhupload\"\n\n              :action=\"uploadImgUrl\"\n              list-type=\"picture-card\"\n              :on-preview=\"xhhandlePictureCardPreview\"\n              :on-remove=\"xhhandleRemove\"\n              :headers=\"headers\"\n              :file-list=\"xhfileList\"\n              :auto-upload=\"false\"\n              :on-change=\"xhhandleBeforeUpload\"\n              :on-success=\"xhhandleUploadSuccess\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"xhdialogVisible\">\n              <img width=\"100%\" :src=\"xhdialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n          <el-form-item label=\"其它单据（最多上传三张图片）\" label-width=\"300px\" prop=\"otherDocuments\">\n\n            <el-upload\n              ref=\"upload\"\n\n              :action=\"uploadImgUrl\"\n              list-type=\"picture-card\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-remove=\"handleRemove\"\n              :headers=\"headers\"\n              :file-list=\"fileList\"\n              :auto-upload=\"false\"\n              :on-change=\"handleBeforeUpload\"\n              :on-success=\"handleUploadSuccess\">\n              <i class=\"el-icon-plus\"></i>\n            </el-upload>\n            <el-dialog :visible.sync=\"otdialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </el-form-item>\n\n        </el-row>\n\n\n        <el-row>\n\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"实装数量\" prop=\"realityInstallNumber\">\n              <el-input v-model=\"qianshouform.realityInstallNumber\"></el-input>\n\n              <el-select\n                clearable\n                v-model=\"qianshouform.realityInstallNumberUnit\"\n                placeholder=\"单位\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in facheoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n<!--            <el-form-item label=\"装货时间\" prop=\"arriveTime\">-->\n<!--              {{qianshouform.arriveTime}}-->\n              <el-form-item label=\"装货时间\" prop=\"arriveTime\">\n\n                <el-date-picker\n                  clearable\n                  type=\"datetime\"\n                  placeholder=\"装货时间\"\n                  :picker-options=\"pickerOptionsStart\"\n                  v-model=\"qianshouform.arriveTime\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\n                  class=\"box-date-picker\"\n                ></el-date-picker>\n              </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :sapn=\"12\"><!--不确定-->\n            <!--            <el-form-item label=\"卸货信息\" prop=\"companyName\">-->\n            <!--              <ImageUpload></ImageUpload>-->\n            <!--            </el-form-item>-->\n          </el-col>\n          <el-col :sapn=\"12\"><!--不确定-->\n            <el-form-item label=\"实收数量\" prop=\"realityArriveNumber\">\n              <el-input v-model=\"qianshouform.realityArriveNumber\"></el-input>\n\n              <el-select class=\"mr10\"  v-model=\"qianshouform.realityArriveNumberUnit\"  clearable>\n                <el-option value=\"0\" label=\"吨\"></el-option>\n                <el-option value=\"1\" label=\"方\"></el-option>\n                <el-option value=\"2\" label=\"件\"></el-option>\n                <el-option value=\"3\" label=\"整车\"></el-option>\n              </el-select><!--不确定-->\n            </el-form-item>\n\n\n\n            <el-form-item label=\"卸货时间\" prop=\"demountTime\">\n\n              <el-date-picker\n                clearable\n                type=\"datetime\"\n                placeholder=\"卸货时间\"\n                :picker-options=\"pickerOptionsStart\"\n                v-model=\"facheform.demountTime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                class=\"box-date-picker\"\n              ></el-date-picker>\n            </el-form-item>\n\n\n\n\n\n          </el-col>\n        </el-row>\n\n\n        <p>结算信息</p>\n        <el-form-item label=\"单价\" prop=\"unitPrice\">\n          <el-input v-model=\"qianshouform.unitPrice\"></el-input>\n\n          <el-select\n            clearable\n            v-model=\"qianshouform.unitPriceUnit\"\n            placeholder=\"单位\"\n            size=\"small\"\n          >\n            <el-option\n              v-for=\"item in facheoptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"结算方式\" prop=\"settleWeight\"> <!--不确定-->\n          <el-select\n            v-model=\"qianshouform.settleWeight\"\n            size=\"small mr10\"\n            placeholder=\"结算方式\"\n            clearable\n          >\n            <el-option value=\"1\" label=\"按实际发货量最小结算\"></el-option>\n            <el-option value=\"2\" label=\"按实际发货量最大结算\"></el-option>\n            <el-option value=\"3\" label=\"按实际发货量结算\"></el-option>\n            <el-option value=\"4\" label=\"按实际收货量结算\"></el-option>\n          </el-select>\n        </el-form-item><!--不确定-->\n\n        <el-form-item label=\"合理亏吨\" prop=\"rationalLossWeight\">\n          <el-input v-model=\"qianshouform.rationalLossWeight\"></el-input>\n\n          <el-select class=\"mr10\" v-model=\"qianshouform.rationalLossWeightUnit\" placeholder=\"\" clearable>\n            <el-option value=\"1\" label=\"%/车\"></el-option>\n            <el-option value=\"1\" label=\"吨/车\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"亏吨单价\" prop=\"lossWeightNumber\">\n          <el-input v-model=\"qianshouform.lossWeightNumber\"></el-input>\n\n          <el-select class=\"mr10\" v-model=\"qianshouform.lossWeightNumberUnit\" >\n            <el-option value=\"1\" label=\"%/车\"></el-option>\n            <el-option value=\"2\" label=\"吨/车\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"结算运费\" prop=\"settleAccounts\">\n          <el-input v-model=\"qianshouform.settleAccounts\"></el-input> 元\n        </el-form-item>\n\n        <el-row> <!--不确定-->\n          <el-col :span=\"8\">\n            <el-form-item label=\"签收人\" prop=\"signUser\">\n              <el-input v-model=\"qianshouform.signUser\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\"> <!--不确定-->\n            <el-form-item label=\"签收说明\" prop=\"signRemark\">\n              <el-input v-model=\"qianshouform.signRemark\" type=\"textarea\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible1 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"signWaybillInfo\"    v-hasPermi=\"['waybill:CarriageInfo:unload']\"\n        >确认签收</el-button\n        >\n      </span>\n    </el-dialog>\n\n    <!--  签收 水路-->\n    <el-dialog\n      title=\"签收确认\"\n      :visible.sync=\"dialogVisible2\"\n      width=\"60%\"\n      center\n    >\n      <p>非船主操作，系统将启动对运单的审核流程，请确认后谨慎操作</p>\n      <el-card class=\"box-card mb20\">\n        <div slot=\"header\" class=\"clearfix\">\n          <h2>张三 沪A12345</h2>\n          <!--          <el-button style=\"float: right; padding: 3px 0\" type=\"text\">操作按钮</el-button>-->\n        </div>\n        <div class=\"flex justify-around align-center\">\n          <div class=\"text-center\">\n            <h2>江西省南昌市毛线区</h2>\n            <p>装货点</p>\n          </div>\n          <div class=\"text-center\">\n            <!-- <el-image></el-image> -->\n            <svg t=\"1622079118311\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n                 p-id=\"3756\" width=\"400\" height=\"50\">\n              <path\n                d=\"M837.9904 570.0608H124.5696a29.0304 29.0304 0 0 1-29.0304-29.0304V482.9696a29.0304 29.0304 0 0 1 29.0304-29.0304h713.4208z\"\n                fill=\"#2C2C2C\" p-id=\"3757\"></path>\n              <path\n                d=\"M561.3056 808.96l-40.96-40.96a28.928 28.928 0 0 1 0-40.96l215.04-215.04-215.04-215.04a28.9792 28.9792 0 0 1 0-40.96l40.96-40.96a28.9792 28.9792 0 0 1 40.96 0l296.96 296.96-296.96 296.96a28.9792 28.9792 0 0 1-40.96 0z\"\n                fill=\"#2C2C2C\" p-id=\"3758\"></path>\n            </svg>\n            <p>480.00/吨</p>\n          </div>\n          <div class=\"text-center\">\n            <h2>广东省广州市白云区</h2>\n            <p>卸货点</p>\n          </div>\n        </div>\n      </el-card>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"150px\">\n        <el-row>\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"装货信息\" prop=\"companyName\">\n              <ImageUpload></ImageUpload>\n            </el-form-item>\n          </el-col>\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"实装数量\" prop=\"companyName\">\n              <el-input v-model=\"form.companyName\"></el-input>\n\n              <el-select class=\"mr10\" value=\"\" placeholder=\"\" clearable>\n                <el-option value=\"\" label=\"吨\"></el-option>\n                <el-option value=\"1\" label=\"方\"></el-option>\n                <el-option value=\"1\" label=\"件\"></el-option>\n                <el-option value=\"1\" label=\"整车\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"装货时间\" prop=\"companyName\">\n              2021\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"卸货信息\" prop=\"companyName\">\n              <ImageUpload></ImageUpload>\n            </el-form-item>\n          </el-col>\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"实收数量\" prop=\"companyName\">\n              <el-input v-model=\"form.companyName\"></el-input>\n\n              <el-select class=\"mr10\" value=\"\" placeholder=\"\" clearable>\n                <el-option value=\"\" label=\"吨\"></el-option>\n                <el-option value=\"1\" label=\"方\"></el-option>\n                <el-option value=\"1\" label=\"件\"></el-option>\n                <el-option value=\"1\" label=\"整车\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"卸货时间\" prop=\"companyName\">\n              2021\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <div>\n          <el-form-item label=\"其它单据\" prop=\"companyName\">\n            <ImageUpload></ImageUpload>\n          </el-form-item>\n        </div>\n\n        <p>结算信息</p>\n        <el-form-item label=\"单价\" prop=\"companyName\"> 48元/吨</el-form-item>\n\n        <el-form-item label=\"滞期费规则(元/吨/天)\" prop=\"companyName\">\n          <el-input v-model=\"form.companyName\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"其他费用\" prop=\"companyName\">\n          <el-input v-model=\"form.companyName\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"滞期费(元)\" prop=\"companyName\">\n          <el-input v-model=\"form.companyName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"实际运费\" prop=\"companyName\">\n          <el-input v-model=\"form.companyName\"></el-input>\n\n          <el-select class=\"mr10\" value=\"\" placeholder=\"\" clearable>\n            <el-option value=\"1\" label=\"元\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"签收人\" prop=\"companyName\">\n              用户名\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"签收说明\" prop=\"companyName\">\n              <el-input v-model=\"form.companyName\" type=\"textarea\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"dialogVisible2 = false\"\n        >确认签收</el-button\n        >\n      </span>\n    </el-dialog>\n\n\n    <!--  运单申请付款(单票)第二收款人 2-->\n    <el-dialog\n      v-if=\"shengqingform.billType=1\"\n      :title=\"'申请付款--'+(shengqingform.billType==1?'单司机收款':(shengqingform.billType==2?'司机、第二人收款':'批量收款'))\"\n      :visible.sync=\"TwoVisible\"\n      width=\"60%\"\n      center\n      @close=\"TwoVisible = false\"\n    >\n      <el-form ref=\"shengqingform\" :model=\"shengqingform\" :rules=\"rules\" label-width=\"150px\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"承运司机：\" prop=\"companyName\">\n              {{shengqingform.chauffeur}}\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"收款人：\" prop=\"companyName\">\n              {{shengqingform.secondPayment}}\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"6\">\n            <el-form-item label=\"结算运费：\" prop=\"companyName\">\n              {{shengqingform.freightSum}}元\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"15\">\n            <el-form-item label=\"\" prop=\"companyName\">\n              （第二收款人收款：{{shengqingform.drPaymentAmount}}元；司机收款：{{shengqingform.sjPaymentAmount}}元\n              ；未付总服务费：{{shengqingform.serviceChargeNot}}元）\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"6\">\n            <el-form-item label=\"未付款金额：\" prop=\"companyName\">\n              {{(shengqingform.notAnotherPayeeMoney+shengqingform.notChauffeurMoney)}}元\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"\" prop=\"companyName\">\n              （第二收款人收款：{{shengqingform.notAnotherPayeeMoney}}元；司机收款：{{shengqingform.notChauffeurMoney}}元）\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :sapn=\"12\">\n            <el-form-item label=\"付款类型\" prop=\"payType\" label-width=\"120px\">\n\n              <el-radio-group v-model=\"shengqingform.payType\">\n\n                <el-radio :label=\"0\" border>预付款</el-radio>\n                <el-radio :label=\"1\" border>到付款</el-radio>\n                <el-radio :label=\"2\" border>回单尾数</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n\n        <el-row>\n\n          <el-col :span=\"4\">\n            <el-form-item\n              label=\"本次申请支付金额（元):\"\n              prop=\"companyName\"\n              label-width=\"180px\">\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"司机\" prop=\"companyName\">\n\n\n              <el-input v-model.trim=\"shengqingform.chauffeurMoney\" @focus=\"selectBillServiceCharge\"\n                        @blur=\"selectBillServiceCharge\" @input=\"selectBillServiceCharge\"\n                        @change=\"selectBillServiceCharge\" :disabled=\"isBatch\"\n                        type=\"number\" class=\"search mr5\" size=\"small\"></el-input>\n\n\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"\" prop=\"companyName\">\n              <el-button type=\"primary\" class=\"mr10\" @click=\"allPayChauffeurMoney\" :disabled=\"isBatch\" plain>全额支付\n              </el-button>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row v-if=\"shengqingform.billType==2\">\n          <el-col :span=\"4\">\n            <el-form-item></el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n\n            <el-form-item label=\"第二收款人\" prop=\"companyName\">\n\n\n              <el-input v-model.trim=\"shengqingform.anotherPayeeMoney\" :disabled=\"isBatch\"\n                        @focus=\"selectBillServiceCharge\" @blur=\"selectBillServiceCharge\"\n                        @input=\"selectBillServiceCharge\" @change=\"selectBillServiceCharge\"\n\n                        type=\"number\" class=\"search mr5\" size=\"small\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"\" prop=\"companyName\">\n              <el-button type=\"primary\" class=\"mr10\" @click=\"allPayAnotherPayeeMoney\" :disabled=\"isBatch\" plain>全额支付\n              </el-button>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\" style=\"vertical-align: middle; \">\n            <el-form-item\n              label=\"平台服务费（元）：\"\n              prop=\"companyName\"\n              label-width=\"180px\">\n              {{shengqingform.serviceCharge}}元\n              <span style=\"color: red;\">{{errServiceCharge}}</span>\n\n            </el-form-item>\n\n\n          </el-col>\n          <!-- <el-col :span=\"6\">\n          </el-col> -->\n          <!-- <el-col :span=\"8\"><el-form-item>支付运费时将扣除对应的服务费 </el-form-item></el-col> -->\n        </el-row>\n\n\n        <el-row>\n          <el-col :span=\"6\" style=\"vertical-align: middle\">\n            <el-form-item\n              label=\"保险费（元）：\"\n              prop=\"companyName\"\n              label-width=\"180px\">\n              {{shengqingform.insuranceMoney}}元\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"6\" style=\"vertical-align: middle\">\n            <el-form-item\n              label=\"返利抵扣:\"\n              prop=\"companyName\"\n              label-width=\"180px\"\n            >\n              <el-switch\n                v-model=\"shengqingform.isRebate\"\n                @change=\"isRebateClick\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n              >\n              </el-switch>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"使用\" v-if=\"this.shengqingform.isRebate\">\n              <el-input style=\"min-width:60px;height:32px;margin-right:20px\" v-model=\"shengqingform.rebateMoney\"\n                        size=\"mini\"></el-input>\n              元返利抵扣服务费\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item style=\"color:red\">可自主设置是否使用返利，返利抵扣金额不支持开票</el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"备注\">\n              <el-input\n                v-model.trim=\"shengqingform.remake\"\n                type=\"textarea\"\n                :rows=\"5\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"\"><h3>总共支付：{{shengqingform.totalPaymentSum}}元</h3></el-form-item>\n          </el-col>\n        </el-row>\n\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"TwoVisible= false\">取 消</el-button>\n\n              <el-button type=\"primary\" v-hasPermi=\"['finance:carriage:submitCarriagePaymentBillInfo']\"\n                         @click=\"subfukuanForm('shengqingform')\"\n                         plain>提交</el-button\n              >\n            </span>\n    </el-dialog>\n\n\n  </div>\n</template>\n\n<script>\n  import {\n    delyundan,\n    getfukuan,\n    getSelectBillServiceCharge,\n    getshangbao,\n    subfukuan,\n    toSendCarReported,\n    tounload,\n    userbalance,\n    waybilllist\n  } from \"@/api/waybill/waybilllist\";\n  import copyText from \"@/utils/clipboard.js\";\n  import FileUpload from \"@/components/FileUpload/index\"\n  import ImageUpload from \"@/components/ImageUpload/index\";\n  import {getToken} from \"@/utils/auth\";\n\n  export default {\n    data() {\n      return {\n        siwtchStete: false,//是否使用返利\n        importDriverUrl: '/waybill/publicUploadFile/uploadFile',\n        text: '导入',\n        waterform: {}, //运单申请付款 水路运输\n        batchform: {},//运单申请付款(批量)\n        sumcount: 0,//选择申请付款单的数量\n        fukuanarr: [],//获取表格申请付款id\n        // 选中数组\n        ids: [],\n        single: true,\n        // 非多个禁用\n        multiple: true,\n        cunarr: [],//保存表格申请付款id拼接\n        pickerOptionsStart: {\n          disabledDate: (time) => {\n            let endDateVal = this.queryParams.endTime;\n            if (endDateVal) {\n              return time.getTime() > new Date(endDateVal).getTime();\n            }\n          },\n        },\n        pickerOptionsEnd: {\n          disabledDate: (time) => {\n            let beginDateVal = this.queryParams.startTime;\n            if (beginDateVal) {\n              return (\n                time.getTime() <\n                new Date(beginDateVal).getTime() - 1 * 24 * 60 * 60 * 1000 + 1\n              );\n            }\n          },\n        },\n        input: '',\n        TwoVisible: false,//第二收款人单票弹框\n        shengqingform: {\n          chauffeurMoney: 0,\n          anotherPayeeMoney: 0,\n          rebateMoney: 0,\n          isRebate: false\n        },//运单申请付款(单票)第二收款人\n        facheform: {}, //发车上报表单\n        qianshouform: {},//签收表单\n        value: true,\n        form: {},\n        tableData: [],\n        rules: {},\n        radio: 0,\n        isShow: false,\n        selelctisShow: true,\n        time: [],\n        selectdialogVisible: false,\n        dialogVisible: false,\n        dialogVisible1: false,\n        dialogVisible2: false,\n        fukuandialogVisible1: false,\n        fukuandialogVisible2: false,\n        fukuandialogVisible3: false,\n        fukuandialogVisible4: false,\n        usermonkey: 0,\n        errServiceCharge: \"\", //计费错误信息\n        isBatch: false, //是否批量\n        // 显示搜索条件\n        showSearch: true,\n        total: 0,//总条数\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          startTime: undefined, //开始时间\n          endTime: undefined, //结束时间\n          carriageState: undefined,//运单状态\n          oftenPathName: undefined, //创建线路名称\n          goodsName: undefined, //货物名称\n          deliverContactsProvince: undefined, //装货地点\n          takeContactsProvince: undefined, //卸货地点\n          deliverContacts: undefined, //发货联系人\n          carriageId: undefined, //运单号\n          relevanceCode: undefined, //客户单号/订单号\n          vehicleNumber: undefined,//车船号\n          checkState: undefined,//审核状态\n          payState: undefined,//支付状态\n          ifInvoice: undefined,//开票状态\n          payeeName: undefined,//司机姓名\n        },\n        yundanoptions: [\n          {\n            value: 0,\n            label: \"草稿\",\n          },\n          {\n            value: 1,\n            label: \"已提交\",\n          },\n          {\n            value: 2,\n            label: \"已分配承运人\",\n          },\n          {\n            value: 3,\n            label: \"已接单\",\n          },\n          {\n            value: 4,\n            label: \"提货中\",\n          },\n          {\n            value: 5,\n            label: \"发车中\",\n          },\n          {\n            value: 6,\n            label: \"已到达\",\n          },\n          {\n            value: 7,\n            label: \"卸货中\",\n          },\n          {\n            value: 8,\n            label: \"已签收\",\n          },\n          {\n            value: 9,\n            label: \"已作废\",\n          }\n        ], //运单状态运单状态:\n        checkoptions: [\n          {\n            value: 0,\n            label: \"草稿\",\n          },\n          {\n            value: 1,\n            label: \"已提交\",\n          },\n          {\n            value: 2,\n            label: \"已分配承运人\",\n          },\n          {\n            value: 3,\n            label: \"已接单\",\n          },\n          {\n            value: 4,\n            label: \"提货中\",\n          },\n          {\n            value: 5,\n            label: \"发车中\",\n          },\n          {\n            value: 6,\n            label: \"已到达\",\n          },\n          {\n            value: 7,\n            label: \"卸货中\",\n          },\n          {\n            value: 8,\n            label: \"已签收\",\n          },\n          {\n            value: 9,\n            label: \"已作废\",\n          }\n        ], //运单审核状态\n        payoptions: [\n          {\n            value: 0,\n            label: \"未付款\",\n          },\n          {\n            value: 1,\n            label: \"部分付款\",\n          },\n          {\n            value: 2,\n            label: \"已结清\",\n          }\n        ], //运单支付状态\n        ifoptions: [\n          {\n            value: 0,\n            label: \"不开\",\n          },\n          {\n            value: 1,\n            label: \"开\",\n          }\n        ], //开票状态\n        facheoptions: [\n          {\n            value: 1,\n            label: \"吨\",\n          },\n          {\n            value: 2,\n            label: \"方\",\n          },\n          {\n            value: 3,\n            label: \"件\",\n          },\n          {\n            value: 4,\n            label: \"整车\",\n          },\n        ], //装货数量单位\n\n\n        uploadImgUrl: process.env.VUE_APP_BASE_API + \"/file/file/uploadFile\", // 上传的图片服务器地址\n        headers: {\n          Authorization: \"Consign \" + getToken(),\n        },\n\n        //装货\n        zhdialogImageUrl: '',\n        zhdialogVisible: false,\n        zhfileList: [],\n\n        // 卸货\n        xhdialogImageUrl: '',\n        xhdialogVisible: false,\n        xhfileList: [],\n\n        //其他单据\n        dialogImageUrl: '',\n        otdialogVisible: false,\n        fileList: [],\n      };\n\n    },\n\n    components: {\n      FileUpload,\n      ImageUpload\n\n    },\n    created() {\n      this.getList();\n      this.getuserbalance();\n    },\n    methods: {\n      handleClose(done) {\n        this.$confirm('确认关闭？')\n          .then(_ => {\n            done();\n          })\n          .catch(_ => {\n          });\n      },\n      //全额付款司机\n      allPayChauffeurMoney() {\n        this.selectBillServiceCharge();\n        this.shengqingform.chauffeurMoney = this.shengqingform.notChauffeurMoney;\n      },\n      //全额付款第二\n      allPayAnotherPayeeMoney() {\n        this.selectBillServiceCharge();\n        this.shengqingform.anotherPayeeMoney = this.shengqingform.notAnotherPayeeMoney;\n      },\n      //对否使用返利\n      isRebateClick() {\n        if (!this.shengqingform.isRebate) {\n          this.shengqingform.rebateMoney = 0;\n        }\n      },\n\n\n      //计算运费的服务费\n      selectBillServiceCharge() {\n        let chauffeurMoney = this.shengqingform.chauffeurMoney;\n        let anotherPayeeMoney = this.shengqingform.anotherPayeeMoney;\n\n        if (chauffeurMoney != undefined && chauffeurMoney != null && chauffeurMoney.length > 0) {\n\n        } else {\n          chauffeurMoney = 0;\n        }\n\n        if (anotherPayeeMoney != undefined && anotherPayeeMoney != null && anotherPayeeMoney.length > 0) {\n\n        } else {\n          anotherPayeeMoney = 0;\n        }\n        const ids = this.ids;\n        const notFreightSum = chauffeurMoney + anotherPayeeMoney;\n\n        var formData = new FormData();\n        formData.append(\"carriageId\", ids);\n        formData.append(\"notFreightSum\", notFreightSum);\n\n        this.errServiceCharge = \"\",\n          this.shengqingform.serviceCharge = 0,\n          getSelectBillServiceCharge(formData).then(response => {\n\n            if (response.code === 200) {\n              this.errServiceCharge = \"计费成功\";\n              this.shengqingform.serviceCharge = response.msg;\n\n            } else {\n\n              // this.errServiceCharge = response.msg;\n            }\n          }).catch(err => {\n            this.errServiceCharge = err;\n\n          });\n      },\n\n      //提交申请付款\n      subfukuanForm() {\n\n        const ids = this.ids;\n\n        if (ids == undefined || ids == null || ids.length == 0) {\n          this.msgError(\"请选择运单\");\n          return;\n        }\n\n        const remake = this.shengqingform.remake;\n        if (remake == undefined || remake == null || remake.length == 0) {\n          this.msgError(\"请输入备注运单\");\n          return;\n        }\n\n\n        let isRebates = \"1\";\n        if (this.shengqingform.isRebate) {\n          isRebates = \"0\";\n        } else {\n          this.shengqingform.rebateMoney = 0;\n        }\n\n        const data = {\n          carriageIds: ids.toString(),\n          chauffeurMoney: this.shengqingform.chauffeurMoney,\n          anotherPayeeMoney: this.shengqingform.anotherPayeeMoney,\n          isRebate: isRebates,\n          rebateMoney: this.shengqingform.rebateMoney,\n          remake: this.shengqingform.remake\n        }\n\n\n        subfukuan(data).then(response => {\n\n          if (response.code === 200) {\n\n            this.msgSuccess(response.msg);\n\n          } else {\n            // this.msgError(response.msg);\n          }\n        }).catch(err => {\n          this.msgError(err);\n        });\n\n      },\n      //显示表格是否开票\n      yunstateFormat(row) {\n        if (row.ifInvoice == 0) {\n          return \"不开\";\n        } else if (row.ifInvoice == 1) {\n          return \"开\";\n        }\n      },\n      //显示运输类型\n      yunstateFormat2(row) {\n        if (row.transportType == 0) {\n          return \"公路运输\";\n        } else if (row.transportType == 1) {\n          return \"水路运输\";\n        }\n      },\n      //显示审核状态\n      yunstateFormat3(row) {\n        if (row.checkState == 0) {\n          return \"待审核\";\n        } else if (row.checkState == 1) {\n          return \"审核中\";\n        } else if (row.checkState == 2) {\n          return \"审核通过\";\n        } else if (row.checkState == 3) {\n          return \"审核不通过\";\n        }\n      },\n      //付款申请状态 0.未结清 1.已结清\n      yunstateFormat4(row) {\n        if (row.paymentState == 0) {\n          return \"未结清\";\n        } else if (row.paymentState == 1) {\n          return \"已结清\";\n        }\n      },\n      //运单状态: 0草稿,1.已提交 2.已分配承运人 3.已接单 4.提货中 5.发车中 6.已到达 7.卸货中 8.已签收 9.已作废\n      yunstateFormat5(row) {\n        if (row.carriageState == 0) {\n          return \"草稿\";\n        } else if (row.carriageState == 1) {\n          return \"已提交\";\n        } else if (row.carriageState == 2) {\n          return \"已分配承运人\";\n        } else if (row.carriageState == 3) {\n          return \"已接单\";\n        } else if (row.carriageState == 4) {\n          return \"提货中\";\n        } else if (row.carriageState == 5) {\n          return \"发车中\";\n        } else if (row.carriageState == 6) {\n          return \"已到达\";\n        } else if (row.carriageState == 7) {\n          return \"卸货中\";\n        } else if (row.carriageState == 8) {\n          return \"已签收\";\n        } else if (row.carriageState == 9) {\n          return \"已作废\";\n        }\n      },\n      // 提交上传文件\n      submitFileForm() {\n        this.$refs.upload.submit();\n      },\n      //根据运单id查询签收，发车上报的信息\n      getbus(carriageId, id) {\n        getshangbao(carriageId).then(response => {\n            console.log(response);\n\n\n            if (response.code == 200) {\n              if (id == 1) {\n                this.facheform = response.data;\n\n\n                //装货图片\n                const goodsDocuments = this.facheform.goodsDocuments;\n                this.zhfileList = [];\n                if (goodsDocuments != undefined && goodsDocuments != null && goodsDocuments != \"\") {\n                  const goodsDocumentsArr = goodsDocuments.split(\",\");\n                  for (var i = 0; i < goodsDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: goodsDocumentsArr[i],\n                      url: goodsDocumentsArr[i],\n                    }\n                    this.zhfileList.push(fileData)\n                  }\n                }\n                //其他单据\n                const otherDocuments = this.facheform.otherDocuments;\n                this.fileList = [];\n                if (otherDocuments != undefined && otherDocuments != null && otherDocuments != \"\") {\n                  const otherDocumentsArr = otherDocuments.split(\",\");\n                  for (var i = 0; i < otherDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: otherDocumentsArr[i],\n                      url: otherDocumentsArr[i],\n                    }\n                    this.fileList.push(fileData)\n                  }\n                }\n\n\n              } else {\n                // alert(1);\n                this.qianshouform = response.data;\n\n\n                //签收111\n\n\n\n                //装货图片\n                const goodsDocuments = this.qianshouform.goodsDocuments;\n                this.zhfileList = [];\n                if (goodsDocuments != undefined && goodsDocuments != null && goodsDocuments != \"\") {\n                  const goodsDocumentsArr = goodsDocuments.split(\",\");\n                  for (var i = 0; i < goodsDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: goodsDocumentsArr[i],\n                      url: goodsDocumentsArr[i],\n                    }\n                    this.zhfileList.push(fileData)\n                  }\n                }\n\n                //卸货图片\n                const unloadDocuments = this.qianshouform.unloadDocuments;\n                this.xhfileList = [];\n                if (unloadDocuments != undefined && unloadDocuments != null && unloadDocuments != \"\") {\n                  const unloadDocumentsArr = unloadDocuments.split(\",\");\n                  for (var i = 0; i < unloadDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: unloadDocumentsArr[i],\n                      url: unloadDocumentsArr[i],\n                    }\n                    this.xhfileList.push(fileData)\n                  }\n                }\n\n\n                //其他单据\n                const otherDocuments = this.qianshouform.otherDocuments;\n                this.fileList = [];\n                if (otherDocuments != undefined && otherDocuments != null && otherDocuments != \"\") {\n                  const otherDocumentsArr = otherDocuments.split(\",\");\n                  for (var i = 0; i < otherDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: otherDocumentsArr[i],\n                      url: otherDocumentsArr[i],\n                    }\n                    this.fileList.push(fileData)\n                  }\n                }\n\n\n\n              }\n            }\n            // console.log(response.data,this.usermonkey)\n          }\n        );\n      },\n      //获取发车上报信息\n      getfacheinfo(carriageId, id) {\n        this.dialogVisible = true;\n        this.loading = true;\n        this.getbus(carriageId, id);\n      },\n      //获取用户的余额\n      getuserbalance() {\n        this.loading = true;\n        userbalance().then(\n          response => {\n            // console.log(response)\n            if (response.code == 200) {\n              this.usermonkey = response.data;\n            }\n          }\n        );\n      },\n      /** 获取运单数据列表 +分页+条件查询*/\n      getList() {\n        this.loading = true;\n        waybilllist(this.addDateRange(this.queryParams)).then(\n          response => {\n            if (response.code == 200) {\n              this.tableData = response.rows;\n              this.total = response.total;\n              this.loading = false;\n            }\n          }\n        );\n      },\n      goDispatch() {\n        this.isShow = false;\n        let radio = this.radio;\n        if (radio == 1) {\n          this.$router.push(\"/transport/dispatch/index\");\n        } else {\n          this.$router.push(\"/transport/dispatch/index\");\n        }\n      },\n      godetails(carriageId) {\n        this.$router.push({\n          path: \"/transport/editwaybill\",\n          query: {carriageId: carriageId},\n        });\n      },\n      goAdd() {\n        this.$router.push(\"/transport/addwaybill\");\n      },\n      //更多查询\n      tabselelctisShow() {\n        this.selelctisShow = !this.selelctisShow;\n      },\n      getCar() {\n        // console.log(this)\n        this.dialogVisible = true;\n      },\n      gonglu(carriageId, id) {\n        this.dialogVisible1 = true;\n        this.getbus(carriageId, id);\n      },\n      shuilu() {\n        this.dialogVisible2 = true;\n      },\n      selectfukuan() {\n        this.selectdialogVisible = true;\n      },\n      // //获取表格中多选框的值\n      handleSelectionChange(val) {\n\n        // console.log(val);\n        // this.fukuanarr = val;\n        this.ids = val.map(item => item.carriageId)\n        this.single = val.length !== 1\n        this.multiple = !val.length\n      },\n      //申请付款按钮\n      fukuan1() {\n        const ids = this.ids;\n\n        if (ids == undefined || ids == null || ids.length == 0) {\n          this.msgError(\"请选择运单\");\n          return;\n        }\n\n        getfukuan(ids).then(response => {\n          console.log(response)\n\n          if (response.code === 200) {\n\n            this.TwoVisible = true;\n\n            this.shengqingform = response.data;\n            this.shengqingform.serviceCharge = 0;\n\n            this.shengqingform.isRebate = false;\n            if (this.shengqingform.billType === 3) {\n              this.isBatch = true;\n            }\n            // alert(this.shengqingform.billType)\n            // this.shengqingform.billType\n            // 1：单票司机收款\n            // 2：单票司机、第二人 收款\n            // 3：批量收款\n\n\n          } else {\n            // this.msgError(response.msg);\n          }\n        }).catch(err => {\n          this.msgError(err.msg);\n\n        });\n      },\n      fukuan2() {\n        this.fukuandialogVisible2 = true;\n      },\n      /**搜索查询按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1;\n        this.getList();\n      },\n      /** 清空按钮操作 */\n      resetQuery() {\n        this.queryParams = {\n          pageNum: 1,\n          pageSize: 10,\n          startTime: undefined, //开始时间\n          endTime: undefined, //结束时间\n          carriageState: undefined,//运单状态\n          oftenPathName: undefined, //创建线路名称\n          goodsName: undefined, //货物名称\n          deliverContactsProvince: undefined, //装货地点\n          takeContactsProvince: undefined, //卸货地点\n          deliverContacts: undefined, //发货联系人\n          carriageId: undefined, //运单号\n          relevanceCode: undefined, //客户单号/订单号\n          vehicleNumber: undefined,//车船号\n          checkState: undefined,//审核状态\n          payState: undefined,//支付状态\n          ifInvoice: undefined,//开票状态\n          payeeName: undefined,//司机姓名\n        },\n          this.resetForm(\"queryForm\");\n        this.handleQuery();\n      },\n      /** 导出按钮操作 */\n      handleExport() {\n        this.download('/waybill/CarriageInfo/exportCarriageInfo', {\n          ...this.queryParams\n        }, `waybill_${new Date().getTime()}.xlsx`)\n      },\n      checkedyemian() {\n        // console.log(this.radio);\n        // if (this.radio == 1) {\n        //   this.fukuandialogVisible1 = true;\n        //   this.selectdialogVisible = false;\n        // } else if (this.radio == 2) {\n        //   this.fukuandialogVisible2 = true;\n        //   this.selectdialogVisible = false;\n        // } else if (this.radio == 3) {\n        //   this.fukuandialogVisible3 = true;\n        //   this.selectdialogVisible = false;\n        // } else {\n        //   this.fukuandialogVisible4 = true;\n        //   this.selectdialogVisible = false;\n        // }\n      },\n      //复制运单号\n      copywaill(text, event) {\n        copyText(text, event)\n      },\n      //根据id删除运单\n      deleteById(carriageId) {\n        delyundan(carriageId).then(\n          response => {\n            if (response.code == 200) {\n              this.msgSuccess(\"删除成功\");\n              this.getList();\n            } else {\n              this.msgError(\"删除失败\");\n            }\n          }\n        );\n      },\n\n// ----------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n      /**\n       * 发车上报\n       */\n      sendCarReported() {\n        //装货图片\n        let goodsDocuments = [];\n        if (this.zhfileList != null && this.zhfileList.length > 0) {\n          for (var i = 0; i < this.zhfileList.length; i++) {\n            goodsDocuments.push(this.zhfileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传装货图片\");\n          return;\n        }\n\n\n        //其他图片\n        let otherDocuments = [];\n        if (this.fileList != null && this.fileList.length > 0) {\n          for (var i = 0; i < this.fileList.length; i++) {\n            otherDocuments.push(this.fileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传其它单据\");\n          return;\n        }\n\n\n        const data = {\n          carriageId: this.facheform.carriageId,\n          realityInstallNumber: this.facheform.realityInstallNumber,\n          realityInstallNumberUnit: this.facheform.realityInstallNumberUnit,\n          settleAccounts: this.facheform.settleAccounts,\n          arriveTime: this.facheform.arriveTime,\n          goodsDocuments: goodsDocuments.toString(),\n          otherDocuments: otherDocuments.toString(),\n        };\n        //发车上报\n        toSendCarReported(data).then(\n          response => {\n            console.log(\"发车上报提交\");\n            console.log(response);\n\n            if (response.code == 200) {\n              this.msgSuccess(\"更新成功\");\n            } else {\n              this.msgError('更新失败');\n            }\n          });\n      },\n\n\n      /**\n       * signWaybillInfo\n       * 签收\n       */\n\n      signWaybillInfo() {\n        //装货图片\n        let goodsDocuments = [];\n        if (this.zhfileList != null && this.zhfileList.length > 0) {\n          for (var i = 0; i < this.zhfileList.length; i++) {\n            goodsDocuments.push(this.zhfileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传装货图片\");\n          return;\n        }\n        //卸货图片\n        let unloadDocuments = [];\n        if (this.xhfileList != null && this.xhfileList.length > 0) {\n          for (var i = 0; i < this.xhfileList.length; i++) {\n            unloadDocuments.push(this.xhfileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传卸货图片\");\n          return;\n        }\n\n\n        //其他图片\n        let otherDocuments = [];\n        if (this.fileList != null && this.fileList.length > 0) {\n          for (var i = 0; i < this.fileList.length; i++) {\n            otherDocuments.push(this.fileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传其它单据\");\n          return;\n        }\n\n\n        const data = {\n          carriageId: this.qianshouform.carriageId,\n          realityInstallNumber: this.qianshouform.realityInstallNumber,\n          realityInstallNumberUnit: this.qianshouform.realityInstallNumberUnit,\n          demountTime: this.qianshouform.demountTime,\n          unitPrice: this.qianshouform.unitPrice,\n\n          unitPriceUnit: this.qianshouform.unitPriceUnit,\n          settleWeight: this.qianshouform.settleWeight,\n          rationalLossWeight: this.qianshouform.rationalLossWeight,\n          rationalLossWeightUnit: this.qianshouform.rationalLossWeightUnit,\n          lossWeightNumber: this.qianshouform.lossWeightNumber,\n          settleAccounts: this.qianshouform.settleAccounts,\n          signUser: this.qianshouform.signUser,\n          signRemark: this.qianshouform.signRemark,\n\n          unloadDocuments: unloadDocuments.toString(),\n          goodsDocuments: goodsDocuments.toString(),\n          otherDocuments: otherDocuments.toString(),\n        };\n\n\n\n\n        //签收\n        tounload(data).then(\n          response => {\n            console.log(\"签收提交\");\n            console.log(response);\n            if (response.code == 200) {\n              this.msgSuccess(\"更新成功\");\n            } else {\n              this.msgError('更新失败');\n            }\n          });\n      },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n      // ------------------------------------------装货图片--------------------------------------------------------------------\n\n      zhhandleBeforeUpload(file) {\n\n        const files = file.raw;\n\n\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.zhfileList.length;\n\n        if (length < 3) {\n          this.$refs.zhupload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.zhfileList.push(fileData);\n\n          this.$delete(this.zhfileList, this.zhfileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.zhfileList, this.zhfileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      zhhandleRemove(file) {\n        const url = file.url;\n        let index = this.zhfileList.findIndex(item => item.url === url);\n        this.$delete(this.zhfileList, index);\n      },\n\n      zhhandlePictureCardPreview(file) {\n        this.zhdialogImageUrl = file.url;\n        this.zhdialogVisible = true;\n      },\n      zhhandleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.zhfileList.push(fileData);\n\n      },\n\n\n      // ------------------------------------------卸货图片--------------------------------------------------------------------\n\n      xhhandleBeforeUpload(file) {\n\n        const files = file.raw;\n\n\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.xhfileList.length;\n\n        if (length < 3) {\n          this.$refs.xhupload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.xhfileList.push(fileData);\n\n          this.$delete(this.xhfileList, this.xhfileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.xhfileList, this.xhfileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      xhhandleRemove(file) {\n        const url = file.url;\n        let index = this.xhfileList.findIndex(item => item.url === url);\n        this.$delete(this.xhfileList, index);\n      },\n\n      xhhandlePictureCardPreview(file) {\n        this.xhdialogImageUrl = file.url;\n        this.xhdialogVisible = true;\n      },\n      xhhandleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.xhfileList.push(fileData);\n\n      },\n\n\n\n      // ------------------------------------------其他单据--------------------------------------------------------------------\n\n      handleBeforeUpload(file) {\n\n        const files = file.raw;\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.fileList.length;\n\n        if (length < 3) {\n          this.$refs.upload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.fileList.push(fileData);\n          this.$delete(this.fileList, this.fileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.fileList, this.fileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      handleRemove(file) {\n        const url = file.url;\n        let index = this.fileList.findIndex(item => item.url === url);\n        // console.log(index);\n        this.$delete(this.fileList, index);\n      },\n\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.otdialogVisible = true;\n      },\n      handleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.fileList.push(fileData);\n\n      },\n\n\n    },\n  };\n</script>\n<style scoped>\n</style>>\n\n\n\n\n"]}]}