{"remainingRequest":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\jusheng1\\src\\views\\transport\\abnormal\\index.vue?vue&type=style&index=0&id=28cbd18b&scoped=true&lang=css&","dependencies":[{"path":"D:\\项目\\jusheng1\\src\\views\\transport\\abnormal\\index.vue","mtime":1627990492424},{"path":"D:\\项目\\jusheng1\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\jusheng1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5pdGVtIHsKICBtYXJnaW4tdG9wOiAxMHB4OwogIG1hcmdpbi1yaWdodDogNDBweDsKfQoK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2zCA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/transport/abnormal","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" v-show=\"showSearch\">\n      <el-row>\n        <div class=\"mb20 flex justify-end\">\n          <el-col :span=\"9\">\n            <el-form-item label=\"创建时间：\">\n              <el-date-picker\n                clearable\n                type=\"datetime\"\n                placeholder=\"开始日期\"\n                :picker-options=\"pickerOptionsStart\"\n                v-model=\"queryParams.startTime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                class=\"box-date-picker\"\n              ></el-date-picker>\n              -\n              <el-date-picker\n                clearable\n                type=\"datetime\"\n                placeholder=\"结束日期\"\n                :picker-options=\"pickerOptionsEnd\"\n                v-model=\"queryParams.endTime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                class=\"box-date-picker\"\n              ></el-date-picker>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"5\">\n            <el-form-item label=\"车牌号\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.vehicleNumber\"\n                value=\"\"\n                placeholder=\"车牌号\"\n                @keyup.enter.native=\"handleQuery\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"5\">\n            <el-form-item label=\"司机姓名\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.payeeName\"\n                value=\"\"\n                @keyup.enter.native=\"handleQuery\"\n                placeholder=\"司机姓名\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"5\">\n            <el-form-item label=\"运单号\">\n              <el-input\n                clearable\n                size=\"small mr10\"\n                v-model=\"queryParams.carriageId\"\n                @keyup.enter.native=\"handleQuery\"\n                value=\"\"\n                placeholder=\"运单号\"\n              >\n              </el-input>\n            </el-form-item>\n          </el-col>\n        </div\n        >\n      </el-row>\n      <el-row>\n        <div class=\"mb20 flex justify-end\">\n          <el-col :span=\"5\">\n            <el-form-item label=\"审核状态\">\n              <el-select\n                clearable\n                v-model=\"queryParams.errorStatus\"\n                size=\"small\"\n              >\n                <el-option\n                  v-for=\"item in yunoptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"4\">\n            <el-form-item>\n              <el-button\n                size=\"small\"\n                type=\"primary\"\n                @click=\"handleQuery()\"\n                plain\n              >查询\n              </el-button\n              >\n              <el-button size=\"small\" type=\"primary\" plain @click=\"resetQuery\">清空</el-button>\n            </el-form-item>\n          </el-col>\n        </div>\n      </el-row>\n    </el-form>\n\n\n    <div class=\"mb20\">\n\n      <el-badge :value=\"daichuli\" class=\"item\">\n        <el-button size=\"small\" @click=\"getSum1(2)\">待处理</el-button>\n      </el-badge>\n      <el-badge :value=\"shenhezhong\" class=\"item\">\n        <el-button size=\"small\" @click=\"getSum1(4)\">审核中</el-button>\n      </el-badge>\n      <el-badge :value=\"nontshenhe\" class=\"item\">\n        <el-button size=\"small\" @click=\"getSum1(5)\">审核不通过</el-button>\n      </el-badge>\n\n      <right-toolbar\n        :showSearch.sync=\"showSearch\"\n        @queryTable=\"getList\"\n      ></right-toolbar>\n    </div>\n\n    <el-table :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column type=\"selection\"></el-table-column>\n      <el-table-column type=\"index\" label=\"序号\"></el-table-column>\n      <el-table-column prop=\"carriageId\" label=\"运单号\"></el-table-column>\n      <el-table-column prop=\"errorRemark\" label=\"运单描述\"></el-table-column>\n      <el-table-column prop=\"vehicleNumber\" label=\"车船号\"></el-table-column>\n      <el-table-column prop=\"payeeName\" width=\"200\" label=\"司机\"></el-table-column>\n      <el-table-column\n        prop=\"arriveTimeUnit\"\n        label=\"装货时间\"\n        width=\"200\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"demountTime\"\n        label=\"卸货时间\"\n        width=\"200\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"errorImage\"\n        label=\"单据照片\"\n        width=\"120\"\n      >\n        <template slot-scope=\"scope\">\n          <!--          <span-->\n          <!--            class=\"operate mr10\"-->\n          <!--            style=\"cursor: pointer\"-->\n          <!--            v-hasPermi=\"['waybill:carriagePath:selectOftenPathById']\"> 查看 </span-->\n          <!--          >-->\n\n          <el-image\n            :lazy=\"true\"\n            style=\"width: 100px; height: 100px\"\n            :src=\"(scope.row.errorImage || '').split(',')[0]\"\n            :preview-src-list=\"(scope.row.errorImage || '').split(',')\">\n          </el-image>\n\n\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"freightSum\"\n        label=\"结算运费\"\n        width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"chauffeur\"\n        label=\"运费收款人\"\n        width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"sjPaymentAmount\"\n        label=\"司机收款金额\"\n        width=\"200\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"drPaymentAmount\"\n        label=\"第二收款人收款金额\"\n        width=\"200\"\n      ></el-table-column>\n      <el-table-column prop=\"errorStatus\" label=\"审核状态\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"auditStatus\" label=\"异常类型\"></el-table-column>\n      <el-table-column prop=\"errorRemark\" label=\"异常描述\"></el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"200\"></el-table-column>\n      <el-table-column prop=\"disposeExplain\" label=\"处理说明\"></el-table-column>\n      <el-table-column prop=\"disposeBy\" label=\"处理人\"></el-table-column>\n      <el-table-column prop=\"disposeTime\" label=\"处理时间\" width=\"120\"></el-table-column>\n      <!-- <el-table-column prop=\"date\" label=\"发货人电话\"></el-table-column> -->\n      <el-table-column prop=\"date\" label=\"操作\" fixed=\"right\" width=\"200px\">\n        <template slot-scope=\"scope\">\n          <span class=\"operate mr10\" @click=\"divererror(scope.row)\">处理</span>\n        </template>\n      </el-table-column>\n    </el-table>\n\n\n    <pagination\n      v-show=\"total > 0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!--  异常处理在途异常报备处理-->\n    <el-dialog\n      title=\"在途异常报备处理\"\n      :visible.sync=\"dialogVisible2\"\n      width=\"60%\"\n      center\n    >\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"150px\">\n        <el-card class=\"box-card mb20\">\n          <div slot=\"header\" class=\"clearfix\">\n            <h2>{{form.billingTime}} {{form.vehicleNumber}}</h2>\n            <!-- <span>张三    沪A12345</span> -->\n            <!--          <el-button style=\"float: right; padding: 3px 0\" type=\"text\">操作按钮</el-button>-->\n          </div>\n          <div class=\"flex justify-around align-center\">\n            <div class=\"text-center\">\n              <h2>{{form.deliverContactsProvince}}</h2>\n              <p>装货点</p>\n            </div>\n            <div class=\"text-center\">\n              <!-- <el-image></el-image> -->\n              <svg t=\"1622079118311\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\"\n                   xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3756\" width=\"400\" height=\"50\">\n                <path\n                  d=\"M837.9904 570.0608H124.5696a29.0304 29.0304 0 0 1-29.0304-29.0304V482.9696a29.0304 29.0304 0 0 1 29.0304-29.0304h713.4208z\"\n                  fill=\"#2C2C2C\" p-id=\"3757\"></path>\n                <path\n                  d=\"M561.3056 808.96l-40.96-40.96a28.928 28.928 0 0 1 0-40.96l215.04-215.04-215.04-215.04a28.9792 28.9792 0 0 1 0-40.96l40.96-40.96a28.9792 28.9792 0 0 1 40.96 0l296.96 296.96-296.96 296.96a28.9792 28.9792 0 0 1-40.96 0z\"\n                  fill=\"#2C2C2C\" p-id=\"3758\"></path>\n              </svg>\n              <p>{{form.unitPrice}}{{form.unitPriceUnit}}</p>\n            </div>\n            <div class=\"text-center\">\n              <h2>{{form.takeContactsProvince}}</h2>\n              <p>卸货点</p>\n            </div>\n          </div>\n        </el-card>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"运单号：\" prop=\"carriageId\">\n              {{form.carriageId}}\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"异常提交时间\" prop=\"createTime\">\n              {{form.createTime}}\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"异常描述\" prop=\"errorRemark\">\n              {{form.errorRemark}}\n            </el-form-item>\n          </el-col>\n\n\n<!--            <el-form-item label=\"异常图片\" prop=\"errorImage\">-->\n<!--              <ImageUpload v-model=\"form.errorImage\"></ImageUpload>-->\n<!--            </el-form-item>-->\n\n\n            <el-form-item label=\"异常图片\" label-width=\"300px\" prop=\"errorImage\">\n              <div class=\"block\" v-for=\"fit in (form.errorImage || '').split(',')\" :key=\"fit\">\n                <el-image\n                  style=\"width: 100px; height: 100px\"\n                  :src=\"fit\"\n                  :preview-src-list=\"(form.errorImage || '').split(',')\"\n                  :z-index=\"90000\"\n                  :fit=\"fit\"></el-image>\n              </div>\n<!--              <el-image-->\n<!--                style=\"width: 100px; height: 100px\"-->\n<!--                :src=\"(form.errorImage || '').split(',')[0]\"-->\n<!--                :preview-src-list=\"(form.errorImage || '').split(',')\"-->\n<!--                :z-index=\"90000\">-->\n<!--              </el-image>-->\n\n\n<!--              <el-upload-->\n<!--                ref=\"errupload\"-->\n\n<!--                :action=\"uploadImgUrl\"-->\n<!--                list-type=\"picture-card\"-->\n<!--                :on-preview=\"errhandlePictureCardPreview\"-->\n<!--                :on-remove=\"errhandleRemove\"-->\n<!--                :headers=\"headers\"-->\n<!--                :file-list=\"errfileList\"-->\n<!--                :auto-upload=\"false\"-->\n<!--                :on-change=\"errhandleBeforeUpload\"-->\n<!--                :on-success=\"errhandleUploadSuccess\">-->\n<!--                <i class=\"el-icon-plus\"></i>-->\n<!--              </el-upload>-->\n<!--              <el-dialog :visible.sync=\"errdialogVisible\">-->\n<!--                <img width=\"100%\" :src=\"errdialogImageUrl\" alt=\"\">-->\n<!--              </el-dialog>-->\n            </el-form-item>\n\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"处理说明\" prop=\"disposeExplain\">\n              <el-input placeholder=\"限制输入200字\" v-model=\"form.disposeExplain\" maxlength=\"200\" type=\"textarea\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" v-hasPermi=\"['waybill:carriageContract:chauffeurReportSolve']\"\n                   @click=\"submitForm\">确认</el-button>\n      </span>\n    </el-dialog>\n\n\n    <!--  处理平台审核异常-->\n    <el-dialog\n      title=\"处理平台审核异常\"\n      :visible.sync=\"pintaidialogVisible\"\n      width=\"70%\"\n      center>\n\n      <div class=\"app-container\" style=\"height: 900px;overflow-y:auto; padding-bottom:200px;\">\n\n        <el-form ref=\"pintaiform\" :model=\"pintaiform\" label-width=\"150px\">\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"装货时间：\" prop=\"arriveTime\">\n                <el-date-picker\n                  v-model=\"pintaiform.arriveTimeUnit\"\n                  type=\"datetime\"\n                  placeholder=\"选择卸货时间\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\">\n                </el-date-picker>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"卸货时间\" prop=\"demountTime\">\n                <el-date-picker\n                  v-model=\"pintaiform.demountTime \"\n                  type=\"datetime\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\n                  placeholder=\"选择卸货时间\">\n                </el-date-picker>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"12\">\n              <el-col :span=\"7\">\n                <el-form-item label=\"装货数量\" prop=\"realityInstallNumber\">\n                  <el-input\n                    size=\"mini\"\n                    v-model.number=\"pintaiform.realityInstallNumber\"\n                    placeholder=\"请输入\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n              <el-col :span=\"1\">\n                <el-form-item>\n                  <el-select\n                    style=\"width: 74px !important; min-width: 74px !important\"\n                    v-model=\"pintaiform.realityInstallNumberUnit\"\n                    placeholder=\"单位\"\n                    size=\"mini\"\n                  >\n                    <el-option\n                      v-for=\"item in zhuanghuoptions\"\n                      :key=\"item.value\"\n                      :label=\"item.label\"\n                      :value=\"item.value\"\n                    >\n                    </el-option>\n                  </el-select>\n                </el-form-item>\n              </el-col>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-col :span=\"7\">\n                <el-form-item label=\"卸货数量\" prop=\"realityArriveNumber\">\n                  <el-input\n                    size=\"mini\"\n                    v-model.number=\"pintaiform.realityArriveNumber \"\n                    placeholder=\"请输入\"\n                  ></el-input>\n                </el-form-item>\n              </el-col>\n              <el-col :span=\"1\">\n                <el-form-item>\n                  <el-select\n                    style=\"width: 74px !important; min-width: 74px !important\"\n                    v-model=\"pintaiform.realityInstallNumberUnit\"\n                    placeholder=\"单位\"\n                    size=\"mini\"\n                  >\n                    <el-option\n                      v-for=\"item in zhuanghuoptions\"\n                      :key=\"item.value\"\n                      :label=\"item.label\"\n                      :value=\"item.value\"\n                    >\n                    </el-option>\n                  </el-select>\n                </el-form-item>\n              </el-col>\n            </el-col>\n          </el-row>\n\n          <el-row>\n            <!--            <el-col :span=\"12\">-->\n            <!--              <el-form-item label=\"装货单\" prop=\"goodsDocuments\">-->\n            <!--                <ImageUpload v-model=\"pintaiform.goodsDocuments\"></ImageUpload>-->\n            <!--              </el-form-item>-->\n            <!--            </el-col>-->\n\n            <!--            <el-col :span=\"12\">-->\n            <!--              <el-form-item label=\"卸货单\" prop=\"unloadDocuments\">-->\n            <!--                <ImageUpload v-model=\"pintaiform.unloadDocuments\"></ImageUpload>-->\n            <!--              </el-form-item>-->\n            <!--            </el-col>-->\n\n            <el-form-item label=\"装货单（最多上传三张图片）\" label-width=\"300px\" prop=\"goodsDocuments\">\n\n              <el-upload\n                ref=\"zhupload\"\n\n                :action=\"uploadImgUrl\"\n                list-type=\"picture-card\"\n                :on-preview=\"zhhandlePictureCardPreview\"\n                :on-remove=\"zhhandleRemove\"\n                :headers=\"headers\"\n                :file-list=\"zhfileList\"\n                :auto-upload=\"false\"\n                :on-change=\"zhhandleBeforeUpload\"\n                :on-success=\"zhhandleUploadSuccess\">\n                <i class=\"el-icon-plus\"></i>\n              </el-upload>\n              <el-dialog :visible.sync=\"zhdialogVisible\">\n                <img width=\"100%\" :src=\"zhdialogImageUrl\"  alt=\"\">\n              </el-dialog>\n            </el-form-item>\n\n\n            <el-form-item label=\"卸货单（最多上传三张图片）\" label-width=\"300px\" prop=\"unloadDocuments\">\n\n              <el-upload\n                ref=\"xhupload\"\n\n                :action=\"uploadImgUrl\"\n                list-type=\"picture-card\"\n                :on-preview=\"xhhandlePictureCardPreview\"\n                :on-remove=\"xhhandleRemove\"\n                :headers=\"headers\"\n                :file-list=\"xhfileList\"\n                :auto-upload=\"false\"\n                :on-change=\"xhhandleBeforeUpload\"\n                :on-success=\"xhhandleUploadSuccess\">\n                <i class=\"el-icon-plus\"></i>\n              </el-upload>\n              <el-dialog :visible.sync=\"xhdialogVisible\">\n                <img width=\"100%\" :src=\"xhdialogImageUrl\" alt=\"\">\n              </el-dialog>\n            </el-form-item>\n\n\n          </el-row>\n\n\n          <el-row>\n\n            <el-form-item label=\"其它单据（最多上传三张图片）\" label-width=\"300px\" prop=\"otherDocuments\">\n\n              <el-upload\n                ref=\"upload\"\n\n                :action=\"uploadImgUrl\"\n                list-type=\"picture-card\"\n                :on-preview=\"handlePictureCardPreview\"\n                :on-remove=\"handleRemove\"\n                :headers=\"headers\"\n                :file-list=\"fileList\"\n                :auto-upload=\"false\"\n                :on-change=\"handleBeforeUpload\"\n                :on-success=\"handleUploadSuccess\">\n                <i class=\"el-icon-plus\"></i>\n              </el-upload>\n              <el-dialog :visible.sync=\"dialogVisible\">\n                <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n              </el-dialog>\n            </el-form-item>\n\n          </el-row>\n\n\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"司机姓名\" prop=\"payeeName\">\n                <el-input\n                  size=\"mini\"\n                  disabled\n                  v-model=\"pintaiform.payeeName\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <!--              <el-form-item label=\"第二收款人\" prop=\"kaihuName\">-->\n\n              <!--                <el-input-->\n              <!--                  size=\"mini\"-->\n              <!--                  placeholder=\"请输入\"-->\n              <!--                  v-model.trim=\"pintaiform.kaihuName\"></el-input>-->\n\n              <!--              </el-form-item>-->\n\n\n              <el-form-item label=\"第二收款人\" prop=\"kaihuName\">\n\n                <el-select v-model=\"valueDrPayment\" filterable placeholder=\"请选择\">\n                  <el-option\n                    v-for=\"item in optionsDrPayment\"\n                    :key=\"item.payeeId\"\n                    :label=\"item.kaihuName+'-'+item.payeePhone\"\n                    :value=\"item.payeeId\">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n\n            </el-col>\n          </el-row>\n\n\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"司机收款(元)\" prop=\"sjPaymentAmount\">\n                <el-input\n                  v-model=\"pintaiform.sjPaymentAmount\"\n                  size=\"mini\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n\n              <el-form-item label=\"第二收款人收款(元)\" prop=\"drPaymentAmount\">\n                <el-input\n                  v-model=\"pintaiform.drPaymentAmount\"\n                  size=\"mini\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n\n\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"结算运费\" prop=\"freightSum\">\n                <el-input\n                  size=\"mini\"\n                  v-model=\"pintaiform.freightSum\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"联系人\" prop=\"disposeBy\">\n                <el-input\n                  v-model=\"pintaiform.disposeBy\"\n                  size=\"mini\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-form-item label=\"联系电话\" prop=\"disposePhone\">\n                <el-input\n                  v-model=\"pintaiform.disposePhone \"\n                  size=\"mini\"\n                ></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n\n\n          <el-row>\n            <el-col :span=\"12\">\n              <el-form-item label=\"申诉说明\" prop=\"disposeExplain\">\n                <el-input v-model=\"pintaiform.disposeExplain\" type=\"textarea\"></el-input>\n              </el-form-item>\n\n            </el-col>\n          </el-row>\n\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"pintaidialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" v-hasPermi=\"['waybill:carriageContract:platformCheckSolve']\"\n                   @click=\"pintaisubmitForm\">确认</el-button>\n      </span>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import ImageUpload from '@/components/ImageUpload/index'\n  import {getToken} from \"@/utils/auth\";\n\n  import {\n    adddivererror,\n    addpintaierror,\n    errorlist,\n    querySecondPayment,\n    selecterrorinfo,\n    selectlist\n  } from \"@/api/waybill/errorlist\";\n\n  export default {\n    data() {\n      return {\n        // 显示搜索条件\n        showSearch: true,\n        yunoptions: [\n          {\n            value: 1,\n            label: \"已处理\",\n          },\n          {\n            value: 2,\n            label: \"待处理\",\n          },\n          {\n            value: 3,\n            label: \"审核通过\",\n          },\n          {\n            value: 4,\n            label: \"审核中\",\n          },\n          {\n            value: 5,\n            label: \"审核不通过\",\n          }\n        ], //异常管理审核状态\n        pickerOptionsStart: {\n          disabledDate: (time) => {\n            let endDateVal = this.queryParams.endTime;\n            if (endDateVal) {\n              return time.getTime() > new Date(endDateVal).getTime();\n            }\n          },\n        },\n        pickerOptionsEnd: {\n          disabledDate: (time) => {\n            let beginDateVal = this.queryParams.startTime;\n            if (beginDateVal) {\n              return (\n                time.getTime() <\n                new Date(beginDateVal).getTime() - 1 * 24 * 60 * 60 * 1000 + 1\n              );\n            }\n          },\n        },\n        zhuanghuoptions: [\n          {\n            value: 1,\n            label: \"吨\",\n          },\n          {\n            value: 2,\n            label: \"方\",\n          },\n          {\n            value: 3,\n            label: \"件\",\n          },\n        ], //装货单位\n        form: {}, //司机异常报备审核\n        pintaiform: {\n          arriveTime: new Date(),\n        },//平台审核异常报备\n        dialogVisible2: false, //异常管理弹框显示和隐藏\n        pintaidialogVisible: false,//异常管理平台显示和隐藏\n        tableData: [],\n        radio: 1,\n        isShow: false,\n        time: [],\n        rules: {\n          disposeExplain: [{required: true, message: '请输入处理说明', trigger: 'blur'}],\n        },\n        total: 0, //总条数\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          startTime: undefined,\n          endTime: undefined,\n          errorStatus: undefined, //审核状态\n          carriageId: undefined, //运单号\n          payeeName: undefined, //司机姓名\n          vehicleNumber: undefined,//车牌号\n        },\n        daichuli: undefined, //待处理\n        shenhezhong: undefined, //审核中\n        nontshenhe: undefined,//审核不通过,\n        carriageErrorId: null,//在线处理司机异常的id\n        optionsDrPayment: [],\n        valueDrPayment: '',\n\n\n        //装货\n        zhdialogImageUrl: '',\n        zhdialogVisible: false,\n        zhfileList: [],\n        // 卸货\n        xhdialogImageUrl: '',\n        xhdialogVisible: false,\n        xhfileList: [],\n\n        //其他单据\n        dialogImageUrl: '',\n        dialogVisible: false,\n        fileList: [],\n\n        // 异常图片\n        errdialogImageUrl: '',\n        errdialogVisible: false,\n        errfileList: [{\n          name: '',\n          url: '',\n        }],\n\n\n\n        uploadImgUrl: process.env.VUE_APP_BASE_API + \"/file/file/uploadFile\", // 上传的图片服务器地址\n        headers: {\n          Authorization: \"Consign \" + getToken(),\n        },\n\n\n      };\n    },\n    components: {\n      ImageUpload\n    },\n    created() {\n      this.getList();\n      this.getSum(2);\n      this.getSum(4);\n      this.getSum(5);\n    },\n    methods: {\n      /** 清空按钮操作 */\n      resetQuery() {\n        this.queryParams = {\n          pageNum: 1,\n          pageSize: 10,\n          startTime: undefined, //开始时间\n          endTime: undefined,  //结束时间\n          errorStatus: undefined, //审核状态\n          carriageId: undefined, //运单号\n          payeeName: undefined, //司机姓名\n          vehicleNumber: undefined,//车牌号\n        },\n          this.resetForm(\"queryForm\");\n        this.handleQuery();\n      },\n      /**搜索查询按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1;\n        this.getqueryParamslist();\n      },\n      /** 获取运单异常列表 */\n      getList() {\n        this.loading = true;\n        selectlist(this.addDateRange(this.queryParams)).then(\n          response => {\n            console.log(response)\n            if (response.code == 200) {\n              this.tableData = response.rows;\n              this.total = response.total;\n            }\n          }\n        );\n      },\n      //统计所有状态信息数据\n      getSum(state) {\n        this.queryParams.errorStatus = state;\n        errorlist(this.addDateRange(this.queryParams)).then(\n          response => {\n            if (response.code == 200) {\n              if (state == 2) {\n                this.daichuli = response.total;\n              } else if (state == 4) {\n                this.shenhezhong = response.total;\n              } else {\n                this.nontshenhe = response.total;\n              }\n            }\n          }\n        );\n      },\n      //根据状态查询所有的列表信息\n      getSum1(state) {\n        this.queryParams.errorStatus = state;\n        errorlist(this.addDateRange(this.queryParams)).then(\n          response => {\n            if (response.code == 200) {\n              if (state == 2) {\n                this.tableData = response.rows;\n                this.daichuli = response.total;\n                this.total = response.total;\n              } else if (state == 4) {\n                this.tableData = response.rows;\n                this.shenhezhong = response.total;\n                this.total = response.total;\n              } else {\n                this.tableData = response.rows;\n                this.nontshenhe = response.total;\n                this.total = response.total;\n              }\n            }\n          }\n        );\n      },\n\n      //条件查询异常列表\n      getqueryParamslist() {\n        this.loading = true;\n        errorlist(this.addDateRange(this.queryParams)).then(\n          response => {\n            if (response.code == 200) {\n              this.tableData = response.rows;\n              this.total = response.total;\n            }\n          }\n        );\n      },\n      goDispatch() {\n        this.isShow = false;\n        let radio = this.radio;\n        if (radio == 1) {\n          this.$router.push(\"/transport/dispatch/index\");\n        } else {\n          this.$router.push(\"/transport/dispatch/index\");\n        }\n      },\n      goAdd() {\n      },\n      chuli() {\n\n      },\n      //司机报备异常或平台审核\n      divererror(row) {\n        // console.log(row)\n        this.carriageErrorId = row.carriageErrorId;\n        if (row.auditStatus == 1) {\n\n          this.dialogVisible2 = true;\n\n          selecterrorinfo(row.carriageId).then(\n            response => {\n              if (response.code == 200) {\n                this.form = response.data;\n\n                //异常图片\n                const errorImage = this.form.errorImage;\n\n\n\n                if (errorImage != undefined && errorImage != null && errorImage != \"\") {\n                  this.errfileList = [];\n\n                  const errorImageArr = errorImage.split(\",\");\n                  for (var i = 0; i < errorImageArr.length; i++) {\n                    const fileData = {\n                      name: errorImageArr[i],\n                      url: errorImageArr[i],\n                    }\n                    this.errfileList.push(fileData)\n                  }\n                }\n\n\n              }else {\n                this.msgError(response.msg);\n              }\n            }\n          );\n        } else if (row.auditStatus == 2) {\n          // optionsDrPayment\n          const data = {payeePhone: null};\n          querySecondPayment(data).then(response => {\n\n            if (response != null && response.code === 200) {\n              this.optionsDrPayment = response.data;\n            } else {\n              this.msgError(\"第二收款人查询失败\");\n\n            }\n\n          });\n\n          selecterrorinfo(row.carriageId).then(\n            response => {\n\n              if (response.code == 200) {\n                this.pintaidialogVisible = true;\n                this.pintaiform = response.data;\n                this.valueDrPayment = this.pintaiform.secondPayment;\n\n\n                //装货图片\n                const goodsDocuments = this.pintaiform.goodsDocuments;\n                this.zhfileList = [];\n                if (goodsDocuments != undefined && goodsDocuments != null && goodsDocuments != \"\") {\n                  const goodsDocumentsArr = goodsDocuments.split(\",\");\n                  for (var i = 0; i < goodsDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: goodsDocumentsArr[i],\n                      url: goodsDocumentsArr[i],\n                    }\n                    this.zhfileList.push(fileData)\n                  }\n                }\n\n                //卸货图片\n                const unloadDocuments = this.pintaiform.unloadDocuments;\n                this.xhfileList = [];\n                if (unloadDocuments != undefined && unloadDocuments != null && unloadDocuments != \"\") {\n                  const unloadDocumentsArr = unloadDocuments.split(\",\");\n                  for (var i = 0; i < unloadDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: unloadDocumentsArr[i],\n                      url: unloadDocumentsArr[i],\n                    }\n                    this.xhfileList.push(fileData)\n                  }\n                }\n\n\n                //其他单据\n                const otherDocuments = this.pintaiform.otherDocuments;\n                this.fileList = [];\n                if (otherDocuments != undefined && otherDocuments != null && otherDocuments != \"\") {\n                  const otherDocumentsArr = otherDocuments.split(\",\");\n                  for (var i = 0; i < otherDocumentsArr.length; i++) {\n                    const fileData = {\n                      name: otherDocumentsArr[i],\n                      url: otherDocumentsArr[i],\n                    }\n                    this.fileList.push(fileData)\n                  }\n                }\n\n\n                // \"CPAP1240056047188848640\"\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n        } else {\n          this.$message('风控自动处理异常');\n        }\n      },\n      /** 司机报备在线处理提交按钮 */\n      submitForm: function () {\n        this.$refs[\"form\"].validate(valid => {\n          if (valid) {\n            //异常图片\n            let errorImage = [];\n            if (this.errfileList != null && this.errfileList.length > 0) {\n              for (var i = 0; i < this.errfileList.length; i++) {\n                errorImage.push(this.errfileList[i].url)\n              }\n            } else {\n              this.msgInfo(\"请选择上传异常图片\");\n              return;\n            }\n\n            this.form.errorImage = errorImage.toString();\n\n            adddivererror(this.carriageErrorId, this.form.disposeExplain).then(response => {\n              console.log(response.code)\n              if (response.code == 200) {\n                this.$message.success(response.msg);\n                this.dialogVisible2 = false;\n                this.getList();\n\n              } else {\n                this.$message.error(response.msg);\n                this.dialogVisible2 = false;\n              }\n            });\n          }\n        });\n      },\n      //平台报备审核处理提交按钮\n      pintaisubmitForm: function () {\n\n\n        //装货图片\n        let goodsDocuments = [];\n        if (this.zhfileList != null && this.zhfileList.length > 0) {\n          for (var i = 0; i < this.zhfileList.length; i++) {\n            goodsDocuments.push(this.zhfileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传装货图片\");\n          return;\n        }\n\n        //卸货图片\n        let unloadDocuments = [];\n        if (this.xhfileList != null && this.xhfileList.length > 0) {\n          for (var i = 0; i < this.xhfileList.length; i++) {\n            unloadDocuments.push(this.xhfileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传卸货图片\");\n          return;\n        }\n\n        //其他图片\n        let otherDocuments = [];\n        if (this.fileList != null && this.fileList.length > 0) {\n          for (var i = 0; i < this.fileList.length; i++) {\n            otherDocuments.push(this.fileList[i].url)\n          }\n        } else {\n          this.msgInfo(\"请选择上传其它单据\");\n          return;\n        }\n\n\n        const valueDrPayment = this.valueDrPayment;\n// alert(this.valueDrPayment)\n\n        if (valueDrPayment == undefined || valueDrPayment == null || valueDrPayment == \"\") {\n          this.msgInfo(\"请输入第二收款人\");\n          return;\n        }\n\n\n        this.pintaiform.goodsDocuments = goodsDocuments.toString();\n        this.pintaiform.unloadDocuments = unloadDocuments.toString();\n        this.pintaiform.otherDocuments = otherDocuments.toString();\n\n\n        this.pintaiform.carriageErrorId = this.carriageErrorId;\n        this.pintaiform.secondPayment = valueDrPayment;\n        addpintaierror(this.pintaiform).then(response => {\n\n          if (response.code == 200) {\n            this.$message.success(response.msg);\n            this.pintaidialogVisible = false;\n            this.getList();\n\n          } else {\n            this.$message.error(response.msg);\n            this.pintaidialogVisible = false;\n          }\n        });\n\n\n      },\n\n\n      // ------------------------------------------装货图片--------------------------------------------------------------------\n\n      zhhandleBeforeUpload(file) {\n\n        const files = file.raw;\n\n\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.zhfileList.length;\n\n        if (length < 3) {\n          this.$refs.zhupload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.zhfileList.push(fileData);\n\n          this.$delete(this.zhfileList, this.zhfileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.zhfileList, this.zhfileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      zhhandleRemove(file) {\n        const url = file.url;\n        let index = this.zhfileList.findIndex(item => item.url === url);\n        this.$delete(this.zhfileList, index);\n      },\n\n      zhhandlePictureCardPreview(file) {\n        this.zhdialogImageUrl = file.url;\n        this.zhdialogVisible = true;\n      },\n      zhhandleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.zhfileList.push(fileData);\n\n      },\n\n\n      // ------------------------------------------卸货图片--------------------------------------------------------------------\n\n      xhhandleBeforeUpload(file) {\n\n        const files = file.raw;\n\n\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.xhfileList.length;\n\n        if (length < 3) {\n          this.$refs.xhupload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.xhfileList.push(fileData);\n\n          this.$delete(this.xhfileList, this.xhfileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.xhfileList, this.xhfileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      xhhandleRemove(file) {\n        const url = file.url;\n        let index = this.xhfileList.findIndex(item => item.url === url);\n        this.$delete(this.xhfileList, index);\n      },\n\n      xhhandlePictureCardPreview(file) {\n        this.xhdialogImageUrl = file.url;\n        this.xhdialogVisible = true;\n      },\n      xhhandleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.xhfileList.push(fileData);\n\n      },\n\n      // ------------------------------------------其他单据--------------------------------------------------------------------\n\n      handleBeforeUpload(file) {\n\n        const files = file.raw;\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.fileList.length;\n\n        if (length < 3) {\n          this.$refs.upload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.fileList.push(fileData);\n\n          this.$delete(this.fileList, this.fileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.fileList, this.fileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      handleRemove(file) {\n        const url = file.url;\n        let index = this.fileList.findIndex(item => item.url === url);\n        // console.log(index);\n        this.$delete(this.fileList, index);\n      },\n\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      handleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.fileList.push(fileData);\n\n      },\n\n\n      // ------------------------------------------异常图片--------------------------------------------------------------------\n\n      errhandleBeforeUpload(file) {\n\n        const files = file.raw;\n\n\n        const typeArr = ['image/png', 'image/gif', 'image/jpeg', 'image/jpg'];\n        const isJPG = typeArr.indexOf(files.type) !== -1;\n        const isLt2M = files.size / 1024 / 1024 < 2;\n        if (!isJPG) {\n          this.msgError('上传图片只能是 png 、jpeg 、jpg  格式!');\n          return;\n        }\n        if (!isLt2M) {\n          this.msgError('上传图片大小不能超过 2MB!');\n          return;\n        }\n        const length = this.errfileList.length;\n\n        if (length < 3) {\n          this.$refs.errupload.submit();\n\n        } else if (length == 3) {\n          const fileData = {\n            name: files.uid,\n            url: files.uid,\n          }\n          this.errfileList.push(fileData);\n\n          this.$delete(this.errfileList, this.errfileList.length - 1);\n\n          return false;\n        } else {\n          this.msgInfo(\"最多上传三张图片\");\n          this.$delete(this.errfileList, this.errfileList.length - 1);\n          return false;\n\n        }\n\n\n      },\n      errhandleRemove(file) {\n        const url = file.url;\n        let index = this.errfileList.findIndex(item => item.url === url);\n        this.$delete(this.errfileList, index);\n      },\n\n      errhandlePictureCardPreview(file) {\n        this.errdialogImageUrl = file.url;\n        this.errdialogVisible = true;\n      },\n      errhandleUploadSuccess(res) {\n        // console.log(res)\n        const fileData = {\n          name: res.data,\n          url: res.data,\n        }\n        this.errfileList.push(fileData);\n\n      },\n\n\n\n\n    },\n  };\n</script>\n\n<style scoped>\n  .item {\n    margin-top: 10px;\n    margin-right: 40px;\n  }\n\n</style>\n\n"]}]}